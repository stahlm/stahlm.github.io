---
title: "EPA Fuel Economy Lab"
author: "Keith Lawless"
date: "2025-01-14"
output:
  html_document:
    df_print: paged
---
## Part I: 
### Load in packages
```{r}
library(tidyverse)
```

### Load & examine our data
```{r}
fuel_data <- mpg
str(fuel_data)
```
```{r}
nrows <- nrow(fuel_data)
nrows
ncols <- ncol(fuel_data)
ncols
```

```{r}
dim(fuel_data)
dim(fuel_data)[2]
dim(fuel_data)[1]

```

### Let's go ahead and summarize our data
```{r}
summary(fuel_data)
```
The most fuel efficient vehicle gets 44.00 hwy mpg
The least fuel efficient vehicle gets 12.00 hwy mpg
The average number of cty mpg is 16.86

### Add a new column (variable)

first way
```{r}
fuel_data$hwy2cty <- fuel_data$hwy / fuel_data$cty # ratio of hwy mpg to cty mpg
```

second way
```{r}
fuel_data <- mutate(fuel_data, hwy2cty = hwy / cty)
min(fuel_data$hwy2cty)
max(fuel_data$hwy2cty)
```

There is no vehicle that gets better gas mileage in the city versus the highway
There is no vehicle that has twice a better hwy mpg than cty mpg
The largest ratio is 1.667

### Examine factors: Displacement
```{r}
ggplot(data = fuel_data) + 
  geom_point(aes(x = displ, y = hwy), color = "blue")
```

```{r}
ggplot(data = fuel_data) + 
  geom_point(aes(x = displ, y = hwy, color = class))
```

```{r}
ggplot(data = fuel_data) + 
  geom_point(aes(x = displ, y = hwy, color = year))
```

```{r}
ggplot(data = fuel_data) + 
  geom_point(aes(x = displ, y = hwy)) +
  facet_wrap(~class)
```


Let's add one more variable!
```{r}
us_makes <- c("chevrolet", "dodge", "ford", "jeep", "lincoln", "mercury", "pontiac")
```

```{r}
fuel_data <- mutate(fuel_data, 
                    region = if_else(manufacturer %in% us_makes, "US", "Foreign"))
```


```{r}
ggplot(data = fuel_data) + 
  geom_point(aes(x = trans, y = hwy, color = cyl))
```

## Part II: Additional Analyses
How do different car classes compare in terms of fuel type, number of cylinders, highway gas mileage and displacement?
```{r}
ggplot(data = fuel_data) +
  geom_point(aes(x = displ, y = hwy, shape = fl, color = cyl)) +
  facet_wrap(~class)
```

The highest highway gas mileages are seen in compact and subcompact cars with smaller (~2) displacement tanks. Assuming d is diesel fuel, it would appear that diesel is the more efficient fuel as well, providing highway gas mileages 5-10 greater than other fuel types in cars of the same class and displacement. In general, 2-seaters appear to be the least efficient out of all car classes. The number of cylinders in a car correlates to the displacement of its engine. In general, the higher the displacement and number of cylinders a car has, the lower its highway gas mileage.  
  
  
How do dodge models in particular compare with each other over the years in terms of highway gas mileage, displacement, number of cylinders, and fuel type?
```{r}
dodge_data <- fuel_data[38:74,]
ggplot(data = dodge_data) +
  geom_point(aes(x = displ, y = hwy, shape = fl, color = cyl)) +
  facet_wrap(~model)
```

There are only two types of fuel that are used by dodge car models in this data set, "e" and "r". The caravan is by far the most efficient vehicle, with the highest highway gas mileage, whilst the ram 1500 pickup is the least efficient. The other three models, all with four wheel drive trains, have much less efficient gas mileages than the caravan. It is surprising to see that the caravan, a minivan, is more efficient than the durango, an SUV.  

How does transmission type effect highway gas mileage in all makes and models across the data set?
```{r}
ggplot(data = fuel_data) +
  geom_boxplot(aes(x = trans, y = hwy))
```

Looking specifically at transmission type and highway gas mileage, we can see that there is quite the spread in data. Aside from a few outliers in auto(I5), auto(I4), and manual(m5) transmissions, it appears that on average auto(s5), auto(av), and auto(I3) transmissions are the most efficient. Cars with auto(I5) and auto(I6) transmissions are the least efficient on average. The very least efficient car in this data set has a manual(m6) transmission, whilst the most efficient has a manual(m5) transmission. It is interesting to see that the most extreme ends of gas efficiency are in cars with manual transmissions over ones with automatic transmissions. This makes sense given the range of time this study gathered car data from, as automatic was likely not as efficient yet.This can be found at https://www.motorbiscuit.com/modern-automatics-beat-manuals-fuel-economy/.
