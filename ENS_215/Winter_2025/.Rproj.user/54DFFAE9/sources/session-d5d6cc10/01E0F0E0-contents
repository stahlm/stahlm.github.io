---
title: "EPA Fuel Economy Lab"
author: "Michael McKenna"
output: html_document
---


### Load in packages
```{r}
library(tidyverse)
```
### Load in our data
```{r}
fuel_data <- mpg
```

```{r}
str(fuel_data)
```
There are 11 variables and 234 observations.
'chr' means 'character', 'int' means 'integer', and 'num' means 'numeric'

```{r}
head(fuel_data)
```
'displ' means engine displacement, 'cyl' means number of cylinders, and 'cty' means city miles per gallon
The information comes from fueleconomy.gov

#Examine the data, 2 methods
```{r}
n_rows <- nrow(fuel_data)  
n_cols <- ncol(fuel_data)
n_rows
n_cols
```

```{r}
dim(fuel_data)[4]
```

Let's go ahead and summarize the data
```{r}
summary(fuel_data)
```
Most fuel efficient vehicle = 44 mpg hgy
Least efficient = 12 mpg hwy
Avg mpg for city driving = 16.86 


### Add a new column

first way
```{r}
fuel_data$hwy2cty <- fuel_data$hwy/fuel_data$cty
```

second way
```{r}
fuel_data <- mutate(fuel_data, hwy2cty = hwy/cty)
```

```{r}
min(fuel_data$hwy2cty)
max(fuel_data$hwy2cty)
```
There is no vehicle that gets better gas mileage in city vs highway
There is no vehicle that has twice as good gas mileage on highway vs city
Largest ratio is 1.666667

### Examine factors: Displacement
```{r}
ggplot(data = fuel_data) + 
  geom_point(aes(x = displ , y = hwy))
```
Because of the negative trend, greater displacement means there is more fuel consumed boosting the demand for fuel
There does not seem to be any outliers. While they are not too far out of range, the points that are between 5 and 7 displ, and between 20 and 30 hwy could be considered a deviation from the trend up to that point.

```{r}
ggplot(data = fuel_data) + 
  geom_point(aes(x = displ , y = hwy, color = class))
```


```{r}
ggplot(data = fuel_data) + 
  geom_point(aes(x = displ , y = hwy, color = year))
```
```{r}
ggplot(data = fuel_data) + 
  geom_point(aes(x = displ , y = hwy)) + 
  facet_wrap(~class)
```

Lets add one more variable 
```{r}
us_make <- c("chevrolet","dodge","ford","jeep","lincoln","mercury","pontiac") #US manufacturers 
```

```{r}
fuel_data <- mutate(fuel_data, 
                   region = if_else(manufacturer %in% us_make, "US", "Foreign"))
```
The region variable is telling us whether the car was made in the USA or not
To make 'region', we first mutated the fuel data to add a new variable 'region'. We then are telling the code to to check (using '%in')  if the car is not of US make (based on "us_make"), and differentiate accordingly


```{r}
ggplot(data = fuel_data) + 
  geom_point(aes(x = drv , y = hwy2cty))
```

```{r}
ggplot(data = fuel_data) + 
  geom_point(aes(x = drv , y=hwy2cty))
```

From Sathvick (below code and graph)
```{r}
fuel_data <- mutate(fuel_data, trans_type = if_else(str_detect(trans, "auto"), "automatic", "manual"))

ggplot(data = fuel_data) + 
  geom_point(aes(x = displ , y = hwy, color = trans_type))
```

```{r}
ggplot(data = fuel_data) + 
  geom_point(aes(x = displ , y = hwy, color = fl))
```


```{r}
ggplot(data = fuel_data) + 
  geom_point(aes(x = hwy , y = class, color = fl))
```

```{r}
ggplot(data = fuel_data) + 
  geom_point(aes(x = hwy , y = class, color = fl)) + 
  facet_wrap(~fl)
```

```{r}
ggplot(data = fuel_data) + 
  geom_point(aes(x = model , y = cyl, color = model)) 
```


```{r}
ggplot(data = fuel_data) + 
  geom_boxplot(aes(x = region , y = hwy))
```