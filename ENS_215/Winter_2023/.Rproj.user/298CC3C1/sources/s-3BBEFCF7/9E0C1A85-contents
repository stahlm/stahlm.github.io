---
title: "Lab 1: Getting Started in R and EPA Fuel Efficiency Data"
author: "Nuo Xu"
output:
  html_document:
    theme: cerulean
    highlight: kate
    toc: TRUE
    
---

<br/>
<br/>

## Introduction:
#### Fuel efficiency analysis is very important because it directly relates to the amount of fuel consumed by a vehicle, which in turn affects the cost of operating the vehicle, as well as the environmental impact of the vehicle's emissions. 

<br/>

#### There are several benefits to owning and driving a fuel-efficient car. Some of the most notable include:

#### -Cost savings: Fuel-efficient cars use less fuel, which means you'll spend less money at the pump. This can be particularly beneficial for people who drive frequently or long distances. While fuel-efficient cars may be more expensive to purchase upfront, they can save you money on fuel costs in the long run, making them more cost-effective overall.

#### -Environmental benefits: Fuel-efficient cars produce fewer emissions, which helps to reduce air pollution and the overall environmental impact of transportation. Fuel-efficient cars emit fewer pollutants, which is better for the planet and the health of people living in the area.

#### -Reduced dependence on fossil fuels: By driving a fuel-efficient car, you can reduce your reliance on fossil fuels and help to decrease our dependence on non-renewable energy sources.

#### -Improved fuel economy: Many fuel-efficient cars have better fuel economy than traditional gasoline-powered vehicles, which can help you save money on fuel costs in the long run.

#### -Government incentives: In some countries, governments offer tax breaks or other incentives to encourage people to buy fuel-efficient cars.
####  -Better driving experience: Many newer models of fuel-efficient cars come with advanced features such as hybrid or electric powertrains, which can provide a more smooth and quiet driving experience compared to traditional gasoline cars.

<br/>
<br/>

## Fuel Economy Analysis:

<br/>

```{r}
library(tidyverse)
```

```{r}
fuel_data <- mpg
```

```{r}
str(fuel_data)
```
#### We can see here there are 11 variables and 234 observations in total 
#### "chr" means characters, "int" means integers, and "num" means numeric values

<br/>

```{r}
# head funtion can be used to look at the first 6 rows of the fuel_data dataset
head(fuel_data)
```
#### -dipl represents the engine displacement(in litres)
#### -cyl represents number of cylinders
#### -cty represents city miles per gallon

<br/>

```{r}
nrow(fuel_data)
ncol(fuel_data)
```
#### We can see here there are 234 rows and 11 columns

<br/>

```{r}
# now assign the value for the number of rows and columns 
n_rows <- nrow(fuel_data)
n_cols <- ncol(fuel_data)
```

<br/>

```{r}
summary(fuel_data)
```
#### For highway driving, 
####  -The most fuel efficient vehicle get 12 miles per gallon
####  -The least fuel efficient vehivle get 44 miles per gallon
####  -The average miles per gallon for city driving is 16.86 miles per gallon

<br/>

```{r}
## Use mutate() to create the new variable (hwy2cty) and add it to the fuel_data object
fuel_data <- mutate(fuel_data, hwy2cty = hwy/cty)

## Use the $ notation to create the new variable (hwy2cty) and add it to the fuel_data object
# fuel_data$hwy2cty <- fuel_data$hwy/fuel_data$cty
print(fuel_data)
```
```{r}
summary(fuel_data)
```
#### Examine the new variable
#### -A hwy/cty ratio that is <1 would show if the vehicle gets better gas milage in the city as compared to the highway. And we can see the minimum hwy/cty ratio is 1.13 which means there's no vehicle gets better gas milage in the city as compared to the highway
#### -A hwy/cty ratio that is >2 would show if the vehicle gets twice as good gas milage on the highway relative to the city.And we can see the maximum hwy/cty ratio is 1.67 which means there's no vehicle gets twice as good gas milage on the highway relative to the city
#### -As stated above, the maximum hwy/cty ratio is 1.67

<br/>

```{r}
ggplot(data=fuel_data) + geom_point(aes(x=hwy, y=displ))
```
```{r}
ggplot(data=fuel_data) + geom_point(aes(x=displ, y=class, color=class))
```
```{r}
# list of U.S. manufacturers
us_makes <- c("chevrolet","dodge","ford","jeep",
              "lincoln","mercury","pontiac") 

fuel_data <- mutate(fuel_data, region = if_else(manufacturer %in% us_makes,"US","Foreign") )
```
#### The variable "region" tells where the vehicles were made
#### -It has two categories, one is "Foreign" which means the maker of vehicle is not from US and the other one is "US" which means the maker of vehicle is from US. 

<br/>
<br/>

## Additional Analysis:
### Does the region of the car maker has an effect on fuel efficiency in the city?
```{r}
ggplot(data=fuel_data) + geom_point(aes(x=cty, y=region, color=region))
```

#### We can see here Foreign cars gets more miles per gallon than US cars. The maximum of miles per gallon for US cars are approximately 21 miles per gallon and the maximum of miles per gallon for Foreign cars are approximately 35 miles per gallon. 

<br/>

### But is it resonable to conclude that Foreign cars are just better than US cars fuel efficiency wise? Let's look at other veriables!
```{r}
ggplot(data=fuel_data) + geom_jitter(aes(x=cty, y=region, color=displ), width = 0, height=0.2)
```

#### We can see from the plot that Foreign cars tends to get more miles per gallon than US cars. And the engine displacement definitely plays a row when it comes to gas fuel consumption. Engine displacement and miles per gallon of vehicles has a negative relationship that as the engine displacement gets higher, the vehicles tends to get less miles per gallon in the city. On the other hand, as the engine displacement gets lower, the vehicles tends to get more miles per gallon in the city. We can see that US cars tend to have higher engine displacement cars whereas Foreign cars tend to have lower engine displacement. It would be unwise to simply conclude that foreign cars are better just because they gets more miles per gallon in the city. We have to take engine displacement into consideration. 

<br/>

### And I'm also interested in seeing if class of cars has an effect on miles per gallon vehicles get in the city since people from different countries would have different preferences of vehicles. 
```{r}
ggplot(data=fuel_data) + geom_jitter(aes(x=cty, y=region, color=class), width = 0, height=0.2)
```

#### We can see from the plot that Foreign cars gets more miles per gallon in the city especially for compact and subcompact cars. We can see that US definitely have more pickup trucks made and those trucks tend get less miles per gallon in the city. And we can also see that the maximum miles per gallon for midsize cars in US is approximately 21 miles and the same kind of midsize cars made in Foreign countries get 23 miles maximum per gallon in the city. Here we can conclude that midsize cars that are made in Foreign countries are more fuel efficient then those midsize cars made in US. Also, compact and subcompact cars from Foreign countries get more miles per gallon in the city. The maximum of Foreign compact cars is approximately 33 miles per gallon. And the maximum of Foreign subcompact cars is approximately 35 miles per gallon. From here, we can conclude that Foreign compact and subcompact cars are more fuel efficient and can get more mileages in the city than US compact and subcompacg cars. 










