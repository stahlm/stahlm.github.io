---
title: "Lab 1: EPA Fuel Analysis"
author: "Lily Gregory"
date: 2023-01-12
output: 
  html_document:
    df_print: paged
---

**Fuel Economy Analysis**  

```{r}
library(tidyverse)
```


**Set up for Analysis**
```{r}
fuel_data <- mpg
```

**Examine the Structure of the Dataset**
```{r}
str(fuel_data)
```
Responses:

Number of variables: 11

Number of observations: 234

chr = character

int = integer

num = numeric


**Examine the first six rows of the dataset**
```{r}
fuel_data[c(1, 6)]
```
```{r}
?mpg
```
Responses:

Displ = engine displacement, in litres

cyl = number of cylinders

cty = city miles per gallon

Data was obtained from: fueleconomy.gov


**Dimensions of the object (number of rows and columns):**
```{r}
dim(fuel_data)
```

```{r}
n_rows <- nrow(fuel_data)
n_rows

n_cols = ncol(fuel_data)
n_cols
```
Responses:

Number of rows: 234

Number of columns: 11


**Summary statistics:**
```{r}
summary(fuel_data)
```
Responses:

Highway Driving:  

  Most fuel efficient vehicle gets 44.00 mpg
  
  Least fuel efficient vehicle gets 12.00 mpg

City Driving: 

  Most fuel efficient vehicle gets 35.00 mpg
  
  Least fuel efficient vehicle gets 9.00 mpg
  

**Hwy to Cty Fuel Economy Ratio**
```{r}
#Using mutate() to create a new variable and adding it to the fuel_data object:
fuel_data <- mutate(fuel_data, hwy2cty = hwy/cty)
fuel_data

#Using $ to create the new variable and adding it to the fuel_data object:
fuel_data$hwy2cty <- fuel_data$hwy/fuel_data$cty
fuel_data
```
Responses:

No there are no vehicles that get better gas milage in the city than on the highway (because min hwy2cty value is above 1)

No there are no vehicles that have twice as good gas milage on the highway relative to the city (because max hwy2cty value is not >= 2)


**Scatterplot of hwy vs displacement (to see how the size of engine influences fuel economy)**
```{r}
ggplot(data = fuel_data) + geom_point(aes(x = displ, y = hwy))
```
Responses:

How does displacement influence the fuel economy: vehicles with higher displacement have lower miles per gallon.

There are some outliers in this dataset. The outliers are vehicles that have displacements ranging from ~5.3-7 but get around 25 mpg on the highway. Compared to most other vehicles with displacements ranging from ~5.3-7  whichget around 10-20 mpg on the highway. Through research with my lab partner we found that what explains these outliers are the type of vehicle. The outlier vehicles are 2-seater sports cars. These cars are smaller so they get a little bit more mpg on the highway than the larger vehicles that fit with the trend on the graph of vehicles with higher displacement getting less mpg on the highway.


**Discplacement and Vehicle Class**
```{r}
ggplot(data = fuel_data) + geom_point(aes(x = displ, y = hwy, color = fl))
```
Responses:

Looking at the fuel type helped explain the outliers and told us about factors that affect the fuel economy.
The outliers all use premium fuel whereas most of the cars with the same displacement but lower highway miles per gallon use regular fuel. I am concluding that premium fuel is more fuel efficient and better for the fuel economy then regular fuel, depending on the car.


**Addinga new variable to fuel_data**
```{r}
#list of US manufacturers
us_makes <- c("chevrolet","dodge","ford","jeep","lincoln","mercury","pontiac")

#adding new variable (region) using the mutate function
fuel_data <- mutate(fuel_data, region = if_else(manufacturer %in% us_makes, "US","Foreign"))
```

Responses:

The variable region noting the vehicles (by make) that are manufactured in the US and the vehicles that are not manufactured in the US

Creating the variable region is done by establishing the makes that are made in the US in the field 'us_makes', then saying if the manufacturer is equal to any one of those makes included in 'us_makes' then label it as US, if not, then label it as Foreign


***My Additional Analyses:***
```{r}
ggplot(data = fuel_data) + geom_point(aes(x = cty, y = hwy, color = manufacturer))
```
Miles per gallon is a great indicator of whether a vehicle is worth the investment, both the financial and environmental investment. Considering this information, I wanted to look at which brand of cars are worthy of investment by looking at the their mpg in the city and on the highway. I thought it was important to look at both city and highway driving as I, like the general public, drive in both environments. 

Results show that Volkswagens and Hondas are two manufacturers that would be smart to look at when car shopping. These brands both produce the vehicles that get the highest mpg in both environments. The data also shows that certain Nisssan and Toyota models would be a good investment (high mpgs in both environments). However some models get low mpg, so I would have to do my research when looking at both these brands. On the contrary, the data shows Jeeps, Chevys, Dodges, and Lincolns are generally not good investments by this standard. Based on these findings, I can conclude that US made vehicles are generally less efficient. Using this dataset to look at the mpg on the city and highway showed me the most fuel efficient and economically efficient cars to invest in. 

```{r}
six_cyl <- c(6,7,8)
fuel_data <- mutate(fuel_data, eff_cylinders = if_else(cyl %in% six_cyl, "Inefficient","Efficient"))

ggplot(data = fuel_data) + geom_point(aes(x = eff_cylinders, y = hwy, color = class))
```
During prior research, I learned that generally any car with 6 or more cylinders offers worse fuel economy than cars with 4 or 5 cylinders. So I manipulated this dataset to see the most efficient class of vehicle based on the number of cylinders, a determining factor of efficiency. 

As seen in the results above, subcompact and compact vehicles are generally the most efficient. Both types of vehicles almost always have either three of four cylinders, which aligns with my research findings. Additionally, midsize vehicles are also fairly efficient. These vehicles generally have four or five cylinders, which also aligns with my research. On the contrary, SUVs and pickup trucks are shown to be inefficient vehicels. This is accurate according to research because they generally have a minimum of five cylinders. 



