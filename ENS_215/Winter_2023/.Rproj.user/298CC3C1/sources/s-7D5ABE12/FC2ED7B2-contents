---
title: 'Lab 2: Global Dams Data'
name: Jennifer Fuerst
date: "1/16/23"
output:
  html_document:
    df_print: paged
---

```{r}
library(tidyverse)

dams_data <- read_csv("https://stahlm.github.io/ENS_215/Data/Dams_FAO_SelectCols_LabData.csv")

```

```{r}
ggplot(data = dams_data)+geom_point(aes(x = Reservoir_capacity_million_m3, y = Reservoir_area_km2, color = Continent))
```
```{r}
dams_data %>%
  ggplot(aes(x = Reservoir_area_km2, y = Reservoir_capacity_million_m3, color = Continent)) + geom_point() + scale_x_log10() + scale_y_log10()
```

This scatter plot is very clustered around 0 reservoir area and 0 reservoir capacity. It is also interesting that the Americas and Asia have 2 dams that have very large areas but almost zero capacity. Meaning these dams are most likely very large but completely dried up. It appears that a lot of dams in Asia are having the issue of being dried up, I wonder how this affects the country?
```{r}
ggplot(data = dams_data)+geom_point(aes( x = Reservoir_capacity_million_m3, y = Dam_height_m, color = Continent))
```
```{r}
dams_data %>%
  ggplot(aes(x = Dam_height_m, y = Reservoir_capacity_million_m3, color = Continent)) + geom_point() + scale_x_log10() + scale_y_log10()
```

This scatter plot seems to be sharing a lot of similarities with the previous chart. Dam height and dam area impact the sizes of the dam where the capacity is how much storage is actually in the dam. Similar to the previous chart, Asia again has little reservoir storage with some of the highest heights. Similar to the previous chart as well, the Americas and Africa have two points with high capacity with average heights and Europe has one.
```{r}
mean(dams_data$Dam_height_m, na.rm = TRUE)
mean(dams_data$Reservoir_area_km2, na.rm = TRUE)
mean(dams_data$Reservoir_capacity_million_m3, na.rm = TRUE)
```

```{r}
dams_data %>% group_by(Continent) %>% 
  summarize(mean_height = mean(Dam_height_m, na.rm = TRUE), 
            mean_area = mean(Reservoir_area_km2, na.rm = TRUE), 
            mean_storage = mean(Reservoir_capacity_million_m3, na.rm = TRUE))
```
It is interesting that the height is pretty consistent throughout the continents (not too great of a difference). The mean area however, differs greatly between Africa and all continents, Americas and Europe between Asia and Oceania. Yet, having a large area does not necessarily mean the largest storage. Africa has 223.9 area but a storage of 769.1 where Europe has 91.4 area and 869.9 storage.

```{r}
ggplot(dams_data) + geom_boxplot(aes(x = Continent, y = Reservoir_capacity_million_m3)) + scale_y_log10() 
```
The distributions are not too crazy of a difference between the continents. There are small differences but they are all relatively similar. 
```{r}
dams_data %>% group_by(Continent) %>% 
  summarize(sum_height = sum(Dam_height_m, na.rm = TRUE), 
            sum_area = sum(Reservoir_area_km2, na.rm = TRUE), 
            sum_storage = sum(Reservoir_capacity_million_m3, na.rm = TRUE))
```
This summary table shows additional info regarding height, area, and storage sorted by continent. The results show different results than the previous chart with the means of height, area, and storage. In the previous chart, Europe showed the highest  storage but when looking at the total storage, America has the highest storage. When looking at the mean again, Asia had the lowest  storage but when looking at sum, Oceania has the lowest storage. This is interesting because although the average amount of storage for these continents might appear higher than others, looking at the total gives you the actual answer. 
```{r}
dams_data %>% group_by(Year_completed) %>% 
  summarize(avg_height = mean(Dam_height_m, na.rm = TRUE), 
            avg_area = mean(Reservoir_area_km2, na.rm = TRUE), 
            avg_storage = mean(Reservoir_capacity_million_m3, na.rm = TRUE))
```
This summary table is similar to the one above, but is categorized by the year the dam was completed instead of the continent. As I expected, as years went on innovation expanded allowing dams to be built higher. For example in 1633 the average heigh was 16 but in 2012 it was 55.5.
```{r}
dams_year <- dams_data %>% count(Year_completed)
dams_year
```
This plot shows the number of damns completed in a given year (n). For example, in 1600 there were 3 dams completed and in 2008 there were 23 damns completed. It is very interesting how the number of dams being made rapidly increased over the years. There was a very large jump at the beginning of the 1900s where it went from typically single digit dam completions to double ditgits mostly in the 20s. Some years were much larger however such as 1935 with 50 completed, 1936 and 1937 with 58 completed, and 1938 with a large jump to 65 dams completed. 
```{r}
arrange(filter(dams_data, Country == "India"))
```
This table focuses only on India. This would be a usefull tool to someone who only cared about one country. This makes the data much smaller but is still a large dataset. Looking at India is particularly interesting because when looking at all dam heigh and reservoir capacity there isnt a significant jump in any areas over the years. The first data collected for dam height is 25 and the last collection is 19.05. The first data collected for reservoir capacity is 12.46 and the last is 12.6. This can tell us that the height and capacity didnt need to necessarily increase over the years as one may think.
```{r}
select(dams_data, Continent, Irrigation, Water_supply, Flood_control)
```
This table highlights the purposes of reservoirs such as irrigation, water supply, and flood control. If an area has a 1 that means it is positive where if there is a 0 it is not accounted for. When looking at this data, almost no areas have flood control. This begs the question of whether Africa never has problem with flooding? On September 11, 2022 flooding caused a collapse in South Africa so was there no budget for flood control? Did they not think it would effect them? Why does Africa not have any flood control showing in this chart? 
```{r}
arrange(filter(dams_data, Irrigation > 0, Water_supply > 0, Flood_control > 0))
```
After looking at the last table my curiosity for which areas might have irrigation, water supply, and flood control peeked. Most of these countries listed are close to the equator. It makes sense that these places would have irrigation systems, water supply, and flood control because countries close to the equator experience large amounts of rainfall. Thus irrigation would be easier for these places to achieve because they can use the consistent rainfall. It would also be easy to have a water supply even in the earliest times from the collection of rainwater. Lastly, it would be important for these countries to have flood control because they would need to protect their homes from this constant rain.

