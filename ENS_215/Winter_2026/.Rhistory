# Make the figures
fig_01 <- ts %>%
ggplot() +
geom_line(aes(x = date, y = tmax), color = "red") +
geom_line(aes(x = date, y = tmin), color = "blue") +
labs(x = "",
y = "Temperature (F)"
) +
geom_hline(yintercept = 32, linetype = "dashed") +
theme_bw()
fig_02 <- ts %>%
ggplot() +
geom_col(aes(x = date, y = prcp), color = "black") +
labs(y = "Precipitation (inches)") +
theme_bw()
# Make the figures
(fig_01 / fig_02) +
plot_annotation(title = paste(loc2use,": Temperature and precipitation", sep = ""),
caption = "Data source: GridMET",
tag_levels = "a"
)
hurricane_data = getGridMET(aoi_get(state = c("NC")),
varname = "pr",
startDate = "2024-09-23", endDate = "2024-09-28")
r = terra::rast(hurricane_data)
r_inches <- r/25.4
tmap_mode("plot")
fig_map <- r_inches %>%
tm_shape() +
tm_raster(style = "cont") +
tm_shape(spData::us_states) +
tm_borders()
fig_map
tmap_mode("view")
fig_map
fig_map
tmap_mode("plot")
round(terra::global(x = r_inches, "max", na.rm = T),2) %>% as.data.frame()
sf::sf_use_s2(FALSE)
temperature_US = getGridMET(aoi_get(state = "conus"),
varname = "tmmn",
startDate = "2025-12-19", endDate = "2025-12-19")
#> Spherical geometry (s2) switched off
#> Spherical geometry (s2) switched on
#> startDate = "2024-10-31", endDate = "2024-10-31"
temperature_US <- terra::rast(temperature_US)
temperature_US <- temperature_US - 273.15
temperature_US <- (temperature_US*9/5) + 32
tmap_mode("plot")
temperature_US %>%
tm_shape() +
tm_raster(style = "cont", palette = "-RdBu", midpoint = 32, title = "Min Temp (C)") +
tm_shape(spData::us_states) +
tm_borders() +
tm_layout(legend.outside.position = "right", legend.outside = T)
library(osmdata)
library(tigris)
library(sf)
#library(osmplotr)
library(tmaptools)
library(OpenStreetMap)
Sys.setenv(MAPBOX_API_KEY = "pk.eyJ1Ijoic3RhaGxtIiwiYSI6ImNrZnJiMDMxbDA0aGsyenFlajhvMzZ4bXUifQ.I7l7fJBAHCQWRwyYozq4ZQ")
loc2use <- "New Mexico"
bb_values <- getbb(loc2use)
bb_values
springs_data <- opq(bb_values) %>%
add_osm_feature(key = 'natural', value = 'spring') %>%
osmdata_sf()
loc_border <- spData::us_states %>%
filter(NAME == "New Mexico")
tmap_mode("view")
map_springs <-
tm_shape(loc_border) +
tm_borders(col = "black") +
tm_shape(springs_data$osm_points) +
tm_dots(col = "blue")
map_springs
map_springs
loc_border <- spData::us_states %>%
filter(NAME == "New York")
loc2use <- "New York"
bb_values <- getbb(loc2use)
bb_values
springs_data <- opq(bb_values) %>%
add_osm_feature(key = 'natural', value = 'spring') %>%
osmdata_sf()
loc_border <- spData::us_states %>%
filter(NAME == "New York")
tmap_mode("view")
map_springs <-
tm_shape(loc_border) +
tm_borders(col = "black") +
tm_shape(springs_data$osm_points) +
tm_dots(col = "blue")
map_springs
library(dataRetrieval)
library(lubridate)
df_stream_data <- readNWISdv(siteNumbers = "09380000",
parameterCd = c("00060"),
statCd = "00003") %>%
renameNWISColumns()
df_stream_data %>%
ggplot(aes(x = Date, y = Flow)) +
geom_line() +
theme_classic()
table_flows <- df_stream_data %>%
mutate(Year = year(Date)) %>%
group_by(Year) %>%
summarize(mean_flow = mean(Flow, na.rm= T),
min_flow = min(Flow, na.rm = T),
max_flow = max(Flow, na.rm = T),
n_meas = n()) %>%
filter(n_meas > 350)
table_flows
fig_max <- table_flows %>%
ggplot(aes(x = Year)) +
geom_line(aes(y = max_flow), size = 1, color = "blue") +
#geom_line(aes(y = min_flow), size = 1, color = "red") +
#geom_line(aes(y = mean_flow), size = 1, color = "black") +
theme_classic()
fig_min <- table_flows %>%
ggplot(aes(x = Year)) +
geom_line(aes(y = min_flow), size = 1, color = "red") +
#geom_line(aes(y = mean_flow), size = 1, color = "black") +
theme_classic()
fig_mean <- table_flows %>%
ggplot(aes(x = Year)) +
geom_line(aes(y = mean_flow), size = 1, color = "black") +
theme_classic()
fig_mean/fig_max/fig_min
remotes::install_github("gadenbuie/countdown", subdir = "r")
countdown::countdown(minutes = 0, seconds = 42)
library(countdown)
install.packages("beepr")
beep(sound = 1, expr = NULL)
library(beepr)
beep(sound = 1, expr = NULL)
beep(sound = 1, expr = NULL)
beep(``)
beep(1)
beep(2)
beep("fanfare")
beep(0)
beep(0)
beep(0)
beep(1)
beep(1)
beep(1)
beep(1)
beep(2)
beep(4)
beep(5)
beep(6)
beep(1)
2+2
2 +
library(tidyverse)
fuel_data <- mpg  # assigning mpg to a new object
?mpg
view(fuel_data)
?str()
?view()
?str()
str(fuel_data)
head(fuel_data)
head(fuel_data, 5)
head(fuel_data, 10)
nrow(fuel_data)
ncol(fuel_data)
mean(1,2,3,4)
my_nums <- c(1,2,3,4,5)
mean(my_nums)
sum(my_nums)
min(my_nums)
View(fuel_data)
fuel_data %>% ggplot(aes(x = year, y = displ, group = model)) + geom_line() + geom_point()
fuel_data %>% ggplot(aes(x = year, y = displ, group = model)) + geom_line() + geom_point() + facet_wrap(~trans)
fuel_data %>% ggplot(aes(x = year, y = displ)) + geom_boxplot()
fuel_data %>% ggplot(aes(x = factor(year), y = displ)) + geom_boxplot()
fuel_data %>% ggplot(aes(x = factor(year), y = displ)) + geom_boxplot() + facet_wrap(~class)
fuel_data %>% ggplot(aes(x = manufacturer, y = displ)) + geom_boxplot())
fuel_data %>% ggplot(aes(x = manufacturer, y = displ)) + geom_boxplot()
fuel_data %>% ggplot(aes(y = manufacturer, x = displ)) + geom_boxplot()
fuel_data %>% ggplot(aes(y = manufacturer, x = arrange(displ))) + geom_boxplot()
fuel_data %>% ggplot(aes(x = arrange(manufacturer), y = displ)) + geom_boxplot()
fuel_data %>% ggplot(aes(x = reorder(manufacturer, displ), y = displ)) + geom_boxplot()
fuel_data %>% ggplot(aes(y = reorder(manufacturer, displ), x = displ)) + geom_boxplot()
fuel_data %>% ggplot(aes(x = displ, y = hwy, color = class)) + geom_point()
fuel_data %>% ggplot(aes(x = displ, y = hwy/cty, color = class)) + geom_point()
fuel_data %>% ggplot(aes(x = hwy, y = hwy/cty, color = class)) + geom_point()
fuel_data %>% ggplot(aes(x = hwy, y = cty, color = class)) + geom_point()
?mpg
?mean()
my_vec <- c(1, 10, 20, 50, 10)
mean(my_vec)
max(my_vec)
library(tidyverse)
?mean()
?mpg
fuel_data <- mpg
view(fuel_data)
str(fuel_data)
str(fuel_data)
ncol(fuel_data)
head(fuel_data)
head(fuel_data, n = 10)
mutate(fuel_data, hwy2cty = hwy/cty)
View(fuel_data)
fuel_data <-  mutate(fuel_data, hwy2cty = hwy/cty)
summary(fuel_data)
str(fuel_data)
summary(fuel_data)
# str(fuel_data)
summary(fuel_data)
ggplot(data = fuel_data) +
geom_point(aes(x = displ, y = hwy))
ggplot(data = fuel_data) +
geom_point(aes(x = displ, y = hwy, color = class))
ggplot(data = fuel_data) +
geom_histogram(aes(x = hwy))
ggplot(data = fuel_data) +
geom_histogram(aes(x = hwy)) +
facet_wrap(~year)
ggplot(data = fuel_data) +
geom_histogram(aes(x = hwy))
ggplot(data = fuel_data) +
geom_histogram(aes(x = hwy))
ggplot(data = fuel_data) +
geom_point(aes(x = displ, y = hwy))
ggplot(data = fuel_data) +
geom_point(aes(x = displ, y = hwy)) +
facet_wrap(~cyl)
ggplot(data = fuel_data) +
geom_point(aes(x = displ, y = hwy)) +
facet_wrap(~class)
ggplot(data = fuel_data) +
geom_boxplot(aes(x = class, y = hwy))
df_epa_expanded <- read.csv("https://www.fueleconomy.gov/feg/epadata/vehicles.csv")
View(df_epa_expanded)
df_epa_expanded %>%
ggplot(aes(x = drive, y = VClass), color = "black", fill = "grey") +
geom_jitter(width = 0.1, height = 0.1, shape = 21)
unique(df_epa_expanded$make)
library(tidyverse)
library(tidyverse)
df_mpg <- mpg
df_mpg$manufacturer
my_seq <- seq(0, 20, by = 2)
my_seq[1]
my_seq[2]
my_seq[11]
my_seq[11]
my_seq[1:2]
library(tidyverse)
my_seq <- seq(0, 20, by = 2)
my_seq <- seq(0, 20, by = 2)
my_seq
my_seq[1]
my_seq[10]
my_seq[1:4]
df_mpg <- mpg
View(df_mpg)
df_mpg$hwy
df_mpg$hwy[1:5]
df_mpg$hwy > 25
df_mpg$hwy > 25
df_mpg$hwy[df_mpg$hwy > 25]
df_mpg$hwy[df_mpg$hwy > 25]
df_mpg$model[df_mpg$hwy > 25]
5 > 10 | 2 < 10
(5 > 10)
(2 < 10)
(5 > 10)
(2 < 10)
(5 > 10) & (2 < 10)
(5 > 10) | (2 < 10)
city_temp <- 54
if(city_temp >= 85){
print("Wow it's pretty hot out!")
} else if(city_temp >= 50){
print("The temperature is nice and comfortable")
} else if (city_temp >= 32){
print("It's pretty cold outside")
} else {
print("It's freezing out!")
}
t_veryhot <- 85
t_nice <- 50
t_cold <- 32
t_veryhot <- 85
t_nice <- 50
t_cold <- 32
if(city_temp >= t_veryhot){
print("Wow it's pretty hot out!")
} else if(city_temp >= t_nice){
print("The temperature is nice and comfortable")
} else if (city_temp >= t_cold){
print("It's pretty cold outside")
} else {
print("It's freezing out!")
}
t_veryhot <- 85
t_nice <- 50
t_cold <- 32
df_mpg %>%
ggplot(aes(x = hwy, y = cty)) +
geom_point()
library(tidyverse)
month.name
month_vec <- month.name
days_vec <- c(31, 28, 30, 31, 30, 31, 30, 31, 30, 31, 30, 31)
paste(month_vec, "has", days_vec, "days")
for (i_month in 1:length(month_vec)) {
i_month
}
for (i_month in 1:length(month_vec)) {
print(i_month)
}
for (i_month in 1:length(month_vec)) {
print(paste(month_vec[i_month]) )
}
for (i_month in 1:length(month_vec)) {
print(paste(month_vec[i_month]), "has", days_vec[i_month], "days")
}
month_vec <- month.name
days_vec <- c(31, 28, 30, 31, 30, 31, 30, 31, 30, 31, 30, 31)
for (i_month in 1:length(month_vec)) {
print(paste(month_vec[i_month]), "has", days_vec[i_month], "days")
}
for (i_month in 1:length(month_vec)) {
print(paste(month_vec[i_month], "has", days_vec[i_month], "days"))
}
library(tidyverse)
dams_data <- read_csv("https://stahlm.github.io/ENS_215/Data/Dams_FAO_SelectCols_LabData.csv")
View(dams_data)
View(dams_data)
dams_data %>%
dams_data %>% ggplot(aes(x = Dam_height_m, y = Reservoir_capacity_million_m3)) + geom_point()
dams_data %>% ggplot(aes(x = Dam_height_m, y = Reservoir_capacity_million_m3)) + geom_point() + scale_y_log10()
dams_data %>% ggplot(aes(x = Year_completed)) + geom_bar()
dams_data %>% mutate(century = round(Year_completed/100))
dams_data %>% mutate(century = round(Year_completed/100)) %>% ggplot(aes(x = century)) + geom_bar()
dams_data %>% mutate(century = round(Year_completed/100)) %>% ggplot(aes(x = century)) + geom_bar() + scale_y_log10()
dams_data %>% arrange(Country, -Dam_height_m)
sum(dams_data$Reservoir_capacity_million_m3, na.rm = T)
sum(dams_data$Reservoir_area_km2, na.rm = T)
library(tidyverse)
dams_data <- read_csv("https://stahlm.github.io/ENS_215/Data/Dams_FAO_SelectCols_LabData.csv")
View(dams_data)
dams_data <- read_csv("https://stahlm.github.io/ENS_215/Data/Dams_FAO_SelectCols_LabData.csv")
ggplot(data = dams_data) +
geom_point(aes(x = Dam_height_m, y = Reservoir_capacity_million_m3))
ggplot(data = dams_data) +
geom_point(aes(x = Dam_height_m, y = Reservoir_capacity_million_m3, color = Continent))
ggplot(data = dams_data) +
geom_point(aes(x = Dam_height_m,
y = Reservoir_capacity_million_m3,
color = Continent))
ggplot(data = dams_data) +
geom_point(aes(x = Dam_height_m,
y = Reservoir_capacity_million_m3,
color = Continent))
ggplot(data = dams_data) +
geom_point(aes(x = Dam_height_m,
y = Reservoir_capacity_million_m3,
color = Continent)) +
scale_x_log10() +
scale_y_log10()
ggplot(data = dams_data) +
geom_point(aes(x = Dam_height_m,
y = Reservoir_capacity_million_m3,
color = Continent), alpha = 0.2) +
scale_x_log10() +
scale_y_log10()
ggplot(data = dams_data) +
geom_point(aes(x = Dam_height_m,
y = Reservoir_capacity_million_m3,
color = Continent)) +
scale_x_log10() +
scale_y_log10()
ggplot(data = dams_data) +
geom_point(aes(x = Dam_height_m,
y = Reservoir_capacity_million_m3,
color = Continent)) +
scale_x_log10() +
scale_y_log10() +
facet_wrap(~Continent)
dams_data %>%
group_by(Continent)
dams_data %>%
group_by(Continent) %>%
summarise(avg_height_m =  mean(Dam_height_m))
dams_data %>%
group_by(Continent) %>%
summarise(avg_height_m =  mean(Dam_height_m, na.rm = TRUE))
dams_data %>%
group_by(Continent) %>%
summarise(avg_height_m =  mean(Dam_height_m, na.rm = TRUE),
avg_area =  mean(Reservoir_area_km2, na.rm = TRUE)
)
dams_data %>%
group_by(Continent) %>%
summarise(avg_height_m =  mean(Dam_height_m, na.rm = TRUE),
avg_area =  mean(Reservoir_area_km2, na.rm = TRUE),
avg_storage = mean(Reservoir_capacity_million_m3, na.rm = TRUE)
)
dams_data %>%
group_by(Continent) %>%
summarise(avg_height_m =  mean(Dam_height_m, na.rm = TRUE),
avg_area =  mean(Reservoir_area_km2, na.rm = TRUE),
avg_storage = mean(Reservoir_capacity_million_m3, na.rm = TRUE),
avg_year = mean(Year_completed, na.rm = TRUE)
)
dams_data %>%
ggplot(aes(x = Year_completed)) +
geom_bar()
dams_data %>%
filter(Year_completed >= 1800) %>%
ggplot(aes(x = Year_completed)) +
geom_bar()
dams_data %>%
filter(Country != "United State of America") %>%
group_by(Continent) %>%
summarise(avg_height_m =  mean(Dam_height_m, na.rm = TRUE),
avg_area =  mean(Reservoir_area_km2, na.rm = TRUE),
avg_storage = mean(Reservoir_capacity_million_m3, na.rm = TRUE),
avg_year = mean(Year_completed, na.rm = TRUE)
)
dams_data %>%
#filter(Country != "United State of America") %>%
group_by(Continent) %>%
summarise(avg_height_m =  mean(Dam_height_m, na.rm = TRUE),
avg_area =  mean(Reservoir_area_km2, na.rm = TRUE),
avg_storage = mean(Reservoir_capacity_million_m3, na.rm = TRUE),
avg_year = mean(Year_completed, na.rm = TRUE)
)
dams_data %>%
filter(Country != "United States of America") %>%
group_by(Continent) %>%
summarise(avg_height_m =  mean(Dam_height_m, na.rm = TRUE),
avg_area =  mean(Reservoir_area_km2, na.rm = TRUE),
avg_storage = mean(Reservoir_capacity_million_m3, na.rm = TRUE),
avg_year = mean(Year_completed, na.rm = TRUE)
)
dams_data %>%
filter(Country != "United States of America") %>%
filter(Country != "Canada") %>%
group_by(Continent) %>%
summarise(avg_height_m =  mean(Dam_height_m, na.rm = TRUE),
avg_area =  mean(Reservoir_area_km2, na.rm = TRUE),
avg_storage = mean(Reservoir_capacity_million_m3, na.rm = TRUE),
avg_year = mean(Year_completed, na.rm = TRUE)
)
dams_data %>%
filter(Country != "United States of America") %>%
filter(Country != "Canada") %>%
filter(Country != "Mexico") %>%
group_by(Continent) %>%
summarise(avg_height_m =  mean(Dam_height_m, na.rm = TRUE),
avg_area =  mean(Reservoir_area_km2, na.rm = TRUE),
avg_storage = mean(Reservoir_capacity_million_m3, na.rm = TRUE),
avg_year = mean(Year_completed, na.rm = TRUE)
)
dams_data %>%
summarize(n_irrigation = sum(Irrigation, na.rm = T))
dams_data %>%
summarize(n_irrigation = sum(Irrigation, na.rm = T),
n_hydro = sum(Hydroelectricity, na.rm = T),
n_flood = sum(Flood_control, na.rm = T)
)
table_uses <- dams_data %>%
summarize(n_irrigation = sum(Irrigation, na.rm = T),
n_hydro = sum(Hydroelectricity, na.rm = T),
n_flood = sum(Flood_control, na.rm = T)
)
View(table_uses)
table_uses %>%
pivot_longer(names_to = "uses", values_to = "n_dams")
table_uses %>%
pivot_longer(cols = 1:3, names_to = "uses", values_to = "n_dams")
ggplot() +
geom_col(aes(x))
table_uses %>%
pivot_longer(cols = 1:3, names_to = "uses", values_to = "n_dams")
table_uses %>%
pivot_longer(cols = 1:3, names_to = "uses", values_to = "n_dams") %>%
ggplot() +
geom_col(aes(x = uses, y = n_dams))
dams_data %>%
filter(Year_completed >= 1800) %>%
ggplot() +
geom_point(aes(x = Dam_height_m,
y = Reservoir_capacity_million_m3,
color = Continent)) +
scale_y_log10() +
facet_wrap(~Continent)
dams_data %>%
filter(Year_completed >= 1800) %>%
ggplot() +
geom_point(aes(x = Dam_height_m,
y = Reservoir_capacity_million_m3,
color = Continent)) +
#scale_y_log10() +
facet_wrap(~Continent)
dams_data %>%
filter(Year_completed >= 1800) %>%
ggplot() +
geom_point(aes(x = Year_completed,
y = Dam_height_m,
color = Continent)) +
#scale_y_log10() +
facet_wrap(~Continent)
