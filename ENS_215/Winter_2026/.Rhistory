filter(Year_completed >= 1800) %>%
ggplot() +
geom_point(aes(x = Dam_height_m,
y = Reservoir_capacity_million_m3,
color = Continent)) +
scale_y_log10() +
facet_wrap(~Continent)
dams_data %>%
filter(Year_completed >= 1800) %>%
ggplot() +
geom_point(aes(x = Dam_height_m,
y = Reservoir_capacity_million_m3,
color = Continent)) +
#scale_y_log10() +
facet_wrap(~Continent)
dams_data %>%
filter(Year_completed >= 1800) %>%
ggplot() +
geom_point(aes(x = Year_completed,
y = Dam_height_m,
color = Continent)) +
#scale_y_log10() +
facet_wrap(~Continent)
library(tidyverse)
library(readr) # we'll use this package later in the lecture to load in files from our class website
library(gapminder)
my_gap <- gapminder
mutate(my_gap,
tot_gdp = gdpPercap * pop)
my_gap <- mutate(my_gap,
tot_gdp = gdpPercap * pop)
# Your code here
my_gap <- mutate(my_gap,
log10_pop = log10(pop))
# Your code here
my_gap <- mutate(my_gap,
income_status = if_else(gdpPercap > 7500, "higher-income","lower-income"))
# Your code here
my_gap <- mutate(my_gap,
income_status = case_when(gdpPercap > 7500 ~ "high income",
gdpPercap > 3500 & gdpPercap <= 7500 ~ "middle income",
gdpPercap <= 3500 ~ "low income") )
# Your code here
my_gap <- rename(my_gap,
life_exp = lifeExp,
gdp_per_cap = gdpPercap)
select(my_gap, year, country, contains("gdp"))
# Your code here
top_n(my_gap, 10, life_exp) # top 10 countries by life expectancy
# Your code here
# Your code here
my_gap_2007 <- filter(my_gap, year == 2007)
summarize(my_gap_2007,
avg_life = mean(life_exp),
avg_gdp_per_cap = mean(gdp_per_cap) )
# Your code here
# Your code here
View(my_gap_2007)
View(my_gap)
precip_data <- read_csv("https://stahlm.github.io/ENS_215/Data/NOAA_State_Precip_LabData.csv")
state_2_get <- "CA" # Abbreviation code for state I want to select
state_data <- filter(precip_data, state_cd == state_2_get)
state_data %>% group_by(Month) %>%
summarize(m_avg = mean(Precip_inches),
m_min = min(Precip_inches),
m_max = max(Precip_inches))
state_data %>%
group_by(Year) %>%
summarize(tot_ann_precip = sum(Precip_inches))
View(precip_data)
noaa_cag_state_precipitation
precip_data <- read_csv("https://stahlm.github.io/ENS_215/Data/noaa_cag_state_precipitation.csv")
state_2_get <- "CA" # Abbreviation code for state I want to select
state_data <- filter(precip_data, state_cd == state_2_get)
precip_data <- precip_data %>%
select(YEAR, MONTH, STATE, Precip_inches = Value)
View(precip_data)
state_2_get <- "California" # State I want to select
state_data <- filter(precip_data, state_cd == state_2_get)
state_2_get <- "California" # State I want to select
state_data <- filter(precip_data, STATE == state_2_get)
precip_data <- read_csv("https://stahlm.github.io/ENS_215/Data/noaa_cag_state_precipitation.csv")
precip_data <- precip_data %>%
select(YEAR, MONTH, STATE, Precip_inches = Value) %>%
filter(YEAR < 2025)
state_2_get <- "New York" # State I want to select
state_data <- precip_data[precip_data$STATE == state_2_get, ] # get the rows with desired state, and get all columns
state_2_get <- "California" # State I want to select
state_data <- filter(precip_data, STATE == state_2_get)
state_data %>% group_by(MONTH) %>%
summarize(m_avg = mean(Precip_inches),
m_min = min(Precip_inches),
m_max = max(Precip_inches))
state_data %>%
group_by(YEAR) %>%
summarize(tot_ann_precip = sum(Precip_inches))
t3 <- precip_data %>%
group_by(STATE, YEAR) %>%
summarize(annual_precip = sum(Precip_inches))
View(t3)
t3 %>%
group_by(YEAR) %>%
top_n(1, annual_precip) %>%
arrange(YEAR)
t5 <- precip_data %>%
group_by(STATE, YEAR) %>%
summarize(tot_annual_precip = sum(Precip_inches)) %>%
group_by(STATE) %>%
summarize(mean_precip = mean(tot_annual_precip),
min_precip = min(tot_annual_precip),
max_precip = max(tot_annual_precip)) %>%
arrange(desc(mean_precip))
View(t5)
state_data <- mutate(state_data,
season = if_else(MONTH %in% c(3,4,5,6,7,8), "season-1", "season-2"))
t6 <-  state_data %>%
group_by(YEAR, season) %>%
summarize(precip_seasonal = sum(Precip_inches)) %>%
group_by(YEAR) %>%
summarize(precip_ratio = first(precip_seasonal)/sum(precip_seasonal) )
View(t6)
View(state_data)
precip_data <- precip_data %>%
select(YEAR, MONTH, STATE, Precip_inches = Value) %>%
filter(YEAR < 2025) %>%
mutate(MONTH = as.numeric(MONTH))
precip_data <- read_csv("https://stahlm.github.io/ENS_215/Data/noaa_cag_state_precipitation.csv")
precip_data <- precip_data %>%
select(YEAR, MONTH, STATE, Precip_inches = Value) %>%
filter(YEAR < 2025) %>%
mutate(MONTH = as.numeric(MONTH))
View(precip_data)
state_data <- mutate(state_data,
season = if_else(MONTH %in% c(3,4,5,6,7,8), "season-1", "season-2"))
t6 <-  state_data %>%
group_by(YEAR, season) %>%
summarize(precip_seasonal = sum(Precip_inches)) %>%
group_by(YEAR) %>%
summarize(precip_ratio = first(precip_seasonal)/sum(precip_seasonal) )
View(t6)
state_data <- mutate(state_data,
season = if_else(MONTH %in% c(3,4,5,6,7,8), "season-1", "season-2"))
t6 <-  state_data %>%
group_by(YEAR, season) %>%
summarize(precip_seasonal = sum(Precip_inches)) %>%
group_by(YEAR) %>%
summarize(precip_ratio = first(precip_seasonal)/sum(precip_seasonal) )
View(t6)
state_2_get <- "California" # State I want to select
state_data <- filter(precip_data, STATE == state_2_get)
state_data <- mutate(state_data,
season = if_else(MONTH %in% c(3,4,5,6,7,8), "season-1", "season-2"))
t6 <-  state_data %>%
group_by(YEAR, season) %>%
summarize(precip_seasonal = sum(Precip_inches)) %>%
group_by(YEAR) %>%
summarize(precip_ratio = first(precip_seasonal)/sum(precip_seasonal) )
library(tidyverse)
library(gapminder)
my_gap <- gapminder
mutate(my_gap,
tot_gdp = gdpPercap * pop)
my_gap <- mutate(my_gap,
tot_gdp = gdpPercap * pop)
# Your code here
my_gap <- mutate(my_gap,
log10_pop = log10(pop))
# Your code here
my_gap <- mutate(my_gap,
income_status = if_else(gdpPercap > 7500, "higher-income","lower-income"))
# Your code here
my_gap <- mutate(my_gap,
income_status = case_when(gdpPercap > 7500 ~ "high income",
gdpPercap > 3500 & gdpPercap <= 7500 ~ "middle income",
gdpPercap <= 3500 ~ "low income") )
# Your code here
my_gap <- rename(my_gap,
life_exp = lifeExp,
gdp_per_cap = gdpPercap)
select(my_gap, year, country, contains("gdp"))
# Your code here
top_n(my_gap, 10, life_exp) # top 10 countries by life expectancy
# Your code here
# Your code here
my_gap_2007 <- filter(my_gap, year == 2007)
summarize(my_gap_2007,
avg_life = mean(life_exp),
avg_gdp_per_cap = mean(gdp_per_cap) )
# Your code here
# Your code here
my_gap_2007 <- group_by(my_gap_2007, continent) # group the data by continent
summarize(my_gap_2007,
min_life = min(life_exp),
mean_life = mean(life_exp),
max_life = max(life_exp))
my_gap <- group_by(my_gap, continent, year) # group by continent then year
summarize(my_gap,
min_life = min(life_exp),
mean_life = mean(life_exp),
max_life = max(life_exp))
my_gap <- ungroup(my_gap) # ungroup the my_gap data
my_gap %>%
group_by(year) %>%
top_n(3, gdp_per_cap)
my_gap %>%
group_by(year) %>%
top_n(3, gdp_per_cap) %>%
arrange(year)
# Your code here
# Your code here
# Your code here
precip_data <- read_csv("https://stahlm.github.io/ENS_215/Data/noaa_cag_state_precipitation.csv")
precip_data <- precip_data %>%
select(YEAR, MONTH, STATE, Precip_inches = Value) %>%
filter(YEAR < 2025) %>%
mutate(MONTH = as.numeric(MONTH))
# Your code here
# Your code here
# Your code here
# Your code here
# Your code here
# Your code here
# Your code here
state_data <- mutate(state_data,
season = if_else(MONTH %in% c(3,4,5,6,7,8), "season-1", "season-2"))
state_2_get <- "California" # State I want to select
state_data <- filter(precip_data, STATE == state_2_get)
state_data <- mutate(state_data,
season = if_else(MONTH %in% c(3,4,5,6,7,8), "season-1", "season-2"))
t6 <-  state_data %>%
group_by(YEAR, season) %>%
summarize(precip_seasonal = sum(Precip_inches)) %>%
group_by(YEAR) %>%
summarize(precip_ratio = first(precip_seasonal)/sum(precip_seasonal) )
View(t6)
library(tidyverse)
library(gapminder)
gap_data <- gapminder
View(gap_data)
gap_data %>%
filter(year >= 1980) %>%
filter(continent == "Asia" | continent == "Africa")
gap_data %>%
filter(year >= 1980) %>%
#filter(continent == "Asia"| continent == "Africa")
filter(continent %in% c("Asia", "Africa"))
my_continents <- c("Asia", "Africa")
gap_data %>%
filter(year >= 1980) %>%
#filter(continent == "Asia"| continent == "Africa")
filter(continent %in% my_continents)
my_continents <- c("Asia", "Africa")
gap_data %>%
filter(year >= 1980) %>%
#filter(continent == "Asia"| continent == "Africa")
filter(continent %in% my_continents) %>%
arrange(lifeExp)
my_continents <- c("Asia", "Africa")
table_01 <- gap_data %>%
filter(year >= 1980) %>%
#filter(continent == "Asia"| continent == "Africa")
filter(continent %in% my_continents) %>%
arrange(lifeExp)
View(table_01)
my_continents <- c("Asia", "Africa")
table_01 <- gap_data %>%
filter(year >= 1980) %>%
#filter(continent == "Asia"| continent == "Africa")
filter(continent %in% my_continents) %>%
arrange(lifeExp)
table_01
avg_life <- mean(gap_data$lifeExp)
avg_life
gap_data %>%
filter(lifeExp > avg_life,
pop > 20*10^6
)
table_02 <- gap_data %>%
filter(lifeExp > avg_life,
pop > 20*10^6
)
table_02
my_gap <- gapminder
View(my_gap)
my_gap %>%
mutate(tot_gdp = gdpPercap * pop)
my_gap <- my_gap %>%
mutate(tot_gdp = gdpPercap * pop)
my_gap %>%
filter(year == 1952) %>%
arrange(-tot_gdp)
my_gap %>%
filter(year == 2007) %>%
arrange(-tot_gdp)
my_gap <- my_gap %>%
mutate(log10_pop = log10(pop))
my_gap <- my_gap %>%
mutate(gdp_percap_ratio = gdpPercap/max(gdpPercap))
my_gap <- my_gap %>%
mutate(income_status = if_else(gdpPercap > 7500, "higher-income", "lower-income")
)
my_gap <- my_gap %>%
mutate(income_status = case_when(gdpPercap > 7500 ~ "high-income",
gdpPercap > 3500 & gdpPercap <= 7500 ~ "middle-income",
gdpPercap <= 3500 ~ "low-income"
)
)
my_gap %>%
filter(year == 1982)
my_gap %>%
filter(year == 1952) %>%
top_n(10, lifeExp)
table_01 <- my_gap %>%
filter(year == 1952) %>%
top_n(10, lifeExp)
table_01
install.packages("imgpalr")
library(imgpalr)
image_pal(file = "C:/Users/stahlm/Downloads/Johannes_Vermeer_-_The_Geographer_-_Google_Art_Project.jpg", n = 6, type = "qual")
library(imgpalr)
image_pal(file = "C:/Users/stahlm/Downloads/Johannes_Vermeer_-_The_Geographer_-_Google_Art_Project.jpg", n = 6, type = "qual")
image_pal(file = "C:/Users/stahlm/Downloads/Johannes_Vermeer_-_The_Geographer_-_Google_Art_Project.jpg", n = 6,
type = "qual", plot = T)
image_pal(file = "C:/Users/stahlm/Downloads/Johannes_Vermeer_-_The_Geographer_-_Google_Art_Project.jpg", n = 6,
type = "qual", plot = T, label_color = "grey90")
set.seed(1)
image_pal(file = "C:/Users/stahlm/Downloads/Johannes_Vermeer_-_The_Geographer_-_Google_Art_Project.jpg", n = 6,
type = "qual", plot = T, label_color = "grey90")
set.seed(1)
image_pal(file = "C:/Users/stahlm/Downloads/Johannes_Vermeer_-_The_Geographer_-_Google_Art_Project.jpg", n = 6,
type = "qual", plot = T, label_color = "grey90")
image_pal(file = "C:/Users/stahlm/Downloads/Jean-Léon_Gérôme_-_Riders_Crossing_The_Desert_(1870)_HQ.jpg", n = 6,
type = "qual", plot = T, label_color = "grey90")
image_pal(file = "C:/Users/stahlm/Downloads/Jean-Léon_Gérôme_-_Riders_Crossing_The_Desert_(1870)_HQ.jpg", n = 9,
type = "qual", plot = T, label_color = "grey90")
library(tidyverse)
library(gapminder)
library(imgpalr)
pal2use <- image_pal(file = "C:/Users/stahlm/Downloads/Jean-Léon_Gérôme_-_Riders_Crossing_The_Desert_(1870)_HQ.jpg", n = 9,
type = "qual", plot = T, label_color = "grey90")
pal2use
pal2use <- image_pal(file = "C:/Users/stahlm/Downloads/Jean-Léon_Gérôme_-_Riders_Crossing_The_Desert_(1870)_HQ.jpg", n = 9,
type = "qual", plot = T, label_color = "grey90")
pal2use
gapminder %>%
ggplot(aes(x = gdpPercap, y = lifeExp, fill = continent)) +
geom_point(shape = 21) +
scale_fill_manual(values = pal2use)
gapminder %>%
ggplot(aes(x = gdpPercap, y = lifeExp, fill = continent)) +
geom_point(shape = 21) +
scale_fill_manual(values = pal2use) +
theme_classic()
pal2use <- image_pal(file = "C:/Users/stahlm/Downloads/Jean-Léon_Gérôme_-_Riders_Crossing_The_Desert_(1870)_HQ.jpg", n = 9,
type = "seq", plot = T, label_color = "grey90")
pal2use
gapminder %>%
ggplot(aes(x = gdpPercap, y = lifeExp, fill = continent)) +
geom_point(shape = 21) +
scale_fill_manual(values = pal2use) +
theme_classic()
pal2use <- image_pal(file = "C:/Users/stahlm/Downloads/Jean-Léon_Gérôme_-_Riders_Crossing_The_Desert_(1870)_HQ.jpg", n = 9,
type = "qual", plot = T, label_color = "grey90")
pal2use
image_quantmap(file = "C:/Users/stahlm/Downloads/Johannes_Vermeer_-_The_Geographer_-_Google_Art_Project.jpg",
pal = pal2use, plot = T)
library(tidyverse)
library(gapminder)
my_gap <- gapminder
gap_2007 <- my_gap %>%
filter(year == 2007) %>%
group_by(continent) %>%
summarise(min_gdp_percap = min(gdpPercap),
max_gdp_percap = max(gdpPercap),
mean_gdp_percap = mean(gdpPercap),
min_le = min(lifeExp),
max_le = max(lifeExp),
mean_le = mean(lifeExp),
n_countries = n()
)
gap_2007
gap_2007 <- my_gap %>%
filter(year == 2007) %>%
group_by(continent) %>%
summarise(min_gdp_percap = min(gdpPercap),
max_gdp_percap = max(gdpPercap),
mean_gdp_percap = mean(gdpPercap),
min_le = min(lifeExp),
max_le = max(lifeExp),
mean_le = mean(lifeExp),
n_countries = n()
)
gap_2007
View(gap_2007)
precip_data <- read_csv("https://stahlm.github.io/ENS_215/Data/noaa_cag_state_precipitation.csv")
precip_data <- precip_data %>%
select(YEAR, MONTH, STATE, Precip_inches = Value) %>%
filter(YEAR < 2025) %>%
mutate(MONTH = as.numeric(MONTH))
View(precip_data)
t1 <- precip_data %>%
filter(STATE == "Connecticut") %>%
group_by(MONTH) %>%
summarize(avg_precip = mean(Precip_inches, na.rm = T),
min_precip = min(Precip_inches, na.rm = T),
max_precip = max(Precip_inches, na.rm = T)
)
t1
t1 <- precip_data %>%
filter(STATE == "Kansas") %>%
group_by(MONTH) %>%
summarize(avg_precip = mean(Precip_inches, na.rm = T),
min_precip = min(Precip_inches, na.rm = T),
max_precip = max(Precip_inches, na.rm = T)
)
t1
t1 <- precip_data %>%
filter(STATE == "Florida") %>%
group_by(MONTH) %>%
summarize(avg_precip = mean(Precip_inches, na.rm = T),
min_precip = min(Precip_inches, na.rm = T),
max_precip = max(Precip_inches, na.rm = T)
)
t1
t1 <- precip_data %>%
#filter(STATE == "Florida") %>%
group_by(STATE, MONTH) %>%
summarize(avg_precip = mean(Precip_inches, na.rm = T),
min_precip = min(Precip_inches, na.rm = T),
max_precip = max(Precip_inches, na.rm = T)
)
t1
View(t1)
library(tidyverse)
bangladesh_gw <- read_csv("https://stahlm.github.io/ENS_215/Data/NationalSurveyData_DPHE_BGS_LabData.csv")
library(tidyverse)
bangladesh_gw <- read_csv("https://stahlm.github.io/ENS_215/Data/NationalSurveyData_DPHE_BGS_LabData.csv")
View(bangladesh_gw)
# ---------------------------------------------------------
# 1. EXAMINE THE DATA
# ---------------------------------------------------------
library(tidyverse)
# Load the dataset
bangladesh_gw <- read_csv("https://stahlm.github.io/ENS_215/Data/NationalSurveyData_DPHE_BGS_LabData.csv")
# Inspect the data structure
glimpse(bangladesh_gw)
# ---------------------------------------------------------
# 2. CREATE ADDITIONAL VARIABLES
# ---------------------------------------------------------
bangladesh_gw <- bangladesh_gw %>%
mutate(
# Create categorical variable for Depth
depth_cat = case_when(
Depth <= 50 ~ "shallow",
Depth > 50 & Depth <= 100 ~ "intermed",
Depth > 100 ~ "deep"
),
# Convert to ordered factor
depth_cat = factor(depth_cat, levels = c("shallow", "intermed", "deep"), ordered = TRUE),
# Create categorical variable for Arsenic (As)
As_cat = case_when(
As <= 10 ~ "low As",
As > 10 & As <= 50 ~ "med As",
As > 50 ~ "high As"
),
# Convert to ordered factor
As_cat = factor(As_cat, levels = c("low As", "med As", "high As"), ordered = TRUE)
)
View(bangladesh_gw)
library(tidyverse)
bangladesh_gw <- read_csv("https://stahlm.github.io/ENS_215/Data/NationalSurveyData_DPHE_BGS_LabData.csv")
View(bangladesh_gw)
low_As <- 10 # low arsenic threshold (ug/L)
med_As <- 50 # low arsenic threshold (ug/L)
bangladesh_gw <- bangladesh_gw %>%
mutate(As_cat = case_when(As_ugL <= low_As ~ "low As",
(As_ugL > low_As) & (As_ugL <= med_As) ~ "med As",
As_ugL > med_As ~ "high As"))
bangladesh_gw <- mutate(bangladesh_gw,
As_cat = factor(As_cat,ordered = TRUE,
levels = c("low As","med As","high As" )) )
# add a column with depth categories
shallow <- 50 # threshold for shallow wells (meters)
intermed <- 100 # threshold for intermed wells (meters)
# create categorical variable for well depths
bangladesh_gw <- bangladesh_gw %>%
mutate(depth_cat = case_when(WELL_DEPTH_m <= shallow ~"shallow",
WELL_DEPTH_m > shallow & WELL_DEPTH_m <= intermed ~ "intermed",
WELL_DEPTH_m > intermed ~ "deep"))
# reorder factors
bangladesh_gw <- mutate(bangladesh_gw,
depth_cat = factor(depth_cat,ordered = TRUE,
levels = c("shallow","intermed","deep" )) )
table_exposure <- bangladesh_gw %>%
group_by(DIVISION) %>%
summarise(n_wells = n()
)
table_exposure
table_exposure <- bangladesh_gw %>%
group_by(DIVISION) %>%
summarise(n_wells = n(),
percent_low_As = 100 * sum(As_cat == "low As") / n_wells
)
table_exposure
table_exposure <- bangladesh_gw %>%
group_by(DIVISION) %>%
summarise(n_wells = n(),
percent_low_As = 100 * sum(As_cat == "low As") / n_wells,
percent_med_As = 100 * sum(As_cat == "med As") / n_wells,
percent_high_As = 100 * sum(As_cat == "high As") / n_wells,
)
table_exposure
