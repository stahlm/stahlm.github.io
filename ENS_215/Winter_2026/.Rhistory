tm_lines(col_alpha = 0.5) +
tm_layout(frame = FALSE)
library(tidyverse)
library(tmap)
library(sf)
library(maps)
library(climateR)
library(terra)
library(AOI)
my_aoi <- AOI::aoi_get(state = "New York", county = "Schenectady")
View(my_aoi)
a <- catalog
View(a)
raster_nlcd <- vrt_crop_get(
URL = "/vsicurl/https://storage.googleapis.com/feddata-r/nlcd/2019_Land_Cover_L48.tif",
catalog = NULL,
AOI = my_aoi,
grid = NULL,
varname = NULL,
start = NULL,
end = NULL,
toptobottom = FALSE,
verbose = TRUE
)
raster_nlcd
r_nlcd <- raster_nlcd$`NLCD Land Cover Class`
terra::plot(r_nlcd)
df_cats <- terra::cats(r_nlcd)[[1]]
View(df_cats)
r_nlcd %>%
tm_shape() +
tm_raster() +
tm_facets(by = "NLCD Land Cover Class")
df_raster <- terra::as.data.frame(x = r_nlcd, xy = T)
View(df_raster)
library(tidyverse)
library(tmap)
library(sf)
library(maps)
library(terra)
library(AOI)
library(elevatr)
loc2use <- geocode(geo = "Schenectady, NY", bbox = T)
#elevation <- get_elev_raster(loc2use, z = 12, clip = "bbox")
#elevation <- rast(elevation)
#writeRaster(elevation, "./elevation_schdy.tiff")
elevation <- rast("https://github.com/stahlm/stahlm.github.io/raw/master/ENS_215/Winter_2022/Lectures/Data/elevation_schdy.tif")
elevation %>%
tm_shape() +
tm_raster(col.scale = tm_scale_continuous(values = terrain.colors(n = 10)),
col.legend = tm_legend(title = "Elevation (m)")
) +
tm_layout(legend.outside = T,
main.title = "Schenectady elevation map")
raster_world_elev <- rast("https://github.com/stahlm/stahlm.github.io/raw/master/ENS_215/Data/World_elev.TIFF")
raster_world_elev <- raster_world_elev$World_elev
# Data was obtained from: https://neo.sci.gsfc.nasa.gov/view.php?datasetId=SRTM_RAMP2_TOPO
raster_world_elev
terra::plot(raster_world_elev)
global(raster_world_elev, fun = "max", na.rm = T)
raster_world_elev[raster_world_elev == 99999] <- NA
terra::plot(raster_world_elev)
raster_world_elev_with_ocean <- rast("https://github.com/stahlm/stahlm.github.io/raw/master/ENS_215/Data/World_elev.TIFF")
raster_world_elev_with_ocean[raster_world_elev_with_ocean == 99999] <- 0
terra::plot(raster_world_elev_with_ocean)
raster_world_elev[raster_world_elev == 99999] <- NA
terra::plot(raster_world_elev)
raster_world_elev_with_ocean <- rast("https://github.com/stahlm/stahlm.github.io/raw/master/ENS_215/Data/World_elev.TIFF")
raster_world_elev_with_ocean[raster_world_elev_with_ocean == 99999] <- 0
terra::plot(raster_world_elev_with_ocean)
global(raster_world_elev_with_ocean, fun = "max", na.rm = T)
global(raster_world_elev_with_ocean, fun = "mean", na.rm = T)
raster_world_elev__ft <- raster_world_elev * 3.28084
global(raster_world_elev__ft, fun = "mean", na.rm = T)
terra::plot(raster_world_elev__ft)
a <- rast("https://neo.gsfc.nasa.gov/servlet/RenderData?si=2044626&cs=rgb&format=TIFF&width=360&height=180")
terra::plot(a)
a
hist(a)
b <- a
globa(a, max)
global(a, max)
global(a, fun = "max")
a
global(a, fun = "max", na.rm = T)
global(a$`RenderData?si=2044626&cs=rgb&format=TIFF&width=360&height=180`, fun = "max", na.rm = T)
b
names(b) <- "ndvi"
b
global(b, fun = "max", na.rm = T)
b[b$ndvi == 255] <- NA
View(b)
720*1440
library(tidyverse)
library(tmap)
library(sf)
library(maps)
library(terra)
raster_world_elev <- rast("https://github.com/stahlm/stahlm.github.io/raw/master/ENS_215/Data/World_elev.TIFF")
raster_world_elev <- raster_world_elev$World_elev
raster_world_elev
terra::plot(raster_world_elev)
global(raster_world_elev, fun = "max", na.rm = T)
raster_world_elev[raster_world_elev == 99999] <- NA
global(raster_world_elev, fun = "max", na.rm = T)
terra::plot(raster_world_elev)
raster_worl_elev__ft <- raster_world_elev * 3.28084
terra::plot(raster_worl_elev__ft)
raster_day_temps <- rast("https://github.com/stahlm/stahlm.github.io/raw/master/ENS_215/Data/Day_temp_2001_march.tif")
raster_day_temps[raster_day_temps == 99999] <- NA
# Data from: https://neo.sci.gsfc.nasa.gov/view.php?datasetId=MOD_LSTD_CLIM_M
raster_night_temps <- rast("https://github.com/stahlm/stahlm.github.io/raw/master/ENS_215/Data/Night_temp_2001_march.TIFF")
raster_night_temps[raster_night_temps == 99999] <- NA
# Data from: https://neo.sci.gsfc.nasa.gov/view.php?datasetId=MOD_LSTN_CLIM_M
terra::plot(raster_day_temps)
terra::plot(raster_night_temps)
raster_temps_diff <- raster_day_temps - raster_night_temps
terra::plot(raster_temps_diff)
hist(raster_temps_diff)
reclass_vec <- c(-100,3,6,15,100)
raster_temps_diff_reclass <- classify(raster_temps_diff, reclass_vec)
terra::plot(raster_temps_diff_reclass)
cities_world <- world.cities
View(cities_world)
cities_world <- cities_world %>%
filter(capital == 1)
cities_world_sf <- cities_world %>%
st_as_sf(coords = c("long", "lat"))
View(cities_world_sf)
elev_data <- extract(raster_world_elev, cities_world_sf)
View(elev_data)
cities_world_sf$elev__m <- elev_data$World_elev
library(tidyverse)
library(tmap)
library(sf)
library(elevatr)
library(tigris)
NY_counties <- counties(state = "NY",
cb = TRUE)
county_schenectady <- NY_counties %>%
filter(NAME == "Schenectady")
raster_elev <- get_elev_raster(county_schenectady,
z = 12,
clip = "locations")
terra::plot(raster_elev)
raster_elev_05 <- get_elev_raster(county_schenectady,
z = 6,
clip = "locations")
terra::plot(raster_elev_05)
library(rnaturalearth)
borders_hires <- ne_countries(country = "Lesotho",
scale = "large",
returnclass = "sf")
raster_elev_lesotho <- get_elev_raster(borders_hires,
z = 9,
clip = "locations")
raster_elev_lesotho %>%
tm_shape() +
tm_raster(col.scale = tm_scale_continuous(values = terrain.colors(n = 10))) +
tm_shape(borders_hires) +
tm_borders()
library(climateR)
border_NY <- ne_states(country = "United States of America", returnclass = "sf")
border_NY <- border_NY %>%
filter(name == "New York")
catalog %>%
filter(id == "gridmet") %>%
select(varname, units, description)
p <- getGridMET(AOI = border_NY,
varname = c("tmmn"),
startDate = "2025-02-04"
)
p <- p$daily_minimum_temperature
p <- terra::crop(p, border_NY)
p <- terra::mask(p, border_NY)
p
p <- p - 273.15
p %>%
tm_shape() +
tm_raster(col.scale = tm_scale_continuous(values = "brewer.blues")) +
#tm_raster(palette = "Blues", n = 10) +
tm_shape(border_NY) +
tm_borders()
borders_hires <- rnaturalearth::ne_countries(country = "Switzerland",
scale = "large",
returnclass = "sf")
catalog %>%
filter(id == "terraclim") %>%
select(varname, units, description)
climate_raster <- getTerraClim(
AOI = borders_hires,
varname = "ppt",
startDate = "2020-01-01",
endDate = "2020-12-01",
verbose = T,
dryrun = FALSE
)
climate_raster <- getTerraClim(
AOI = borders_hires,
varname = "ppt",
startDate = "2020-01-01",
endDate = "2020-12-01",
verbose = T,
dryrun = FALSE
)
climate_raster <- climate_raster$ppt
climate_raster <- getTerraClim(
AOI = borders_hires,
varname = "ppt",
startDate = "2020-01-01",
endDate = "2020-12-01",
verbose = T,
dryrun = FALSE
)
climate_raster <- climate_raster$ppt
climate_raster <- getTerraClim(
AOI = borders_hires,
varname = "ppt",
startDate = "2020-01-01",
endDate = "2020-12-01",
verbose = T,
dryrun = FALSE
)
catalog %>%
filter(id == "worldclim") %>%
select(varname, units, description)
catalog %>%
filter(id == "Worldclim") %>%
select(varname, units, description)
a <- catalog
View(a)
catalog %>%
filter(id == "WorldClim2.1") %>%
select(varname, units, description)
climate_raster <- getWorldClim(
AOI = borders_hires,
varname = "prec",
month = 1:12,
verbose = T,
dryrun = FALSE
)
climate_raster <- getWorldClim(
AOI = borders_hires,
varname = "prec",
month = 1:12,
verbose = T
)
climate_raster <- getTerraClim(
AOI = borders_hires,
varname = "ppt",
startDate = "2020-01-01",
endDate = "2020-12-01",
verbose = T,
dryrun = FALSE
)
# climate_raster <- getWorldClim(
#   AOI = borders_hires,
#   varname = "prec",
#   month = 1:12,
#   verbose = T
# )
climate_raster <- getCHIRPS(
AOI = borders_hires,
#varname = "ppt",
timeRes = "Monthly",
startDate = "2020-01-01",
endDate = "2020-12-01",
verbose = T,
dryrun = FALSE
)
climate_raster$precip
climate_raster <- climate_raster$precip
climate_raster <- terra::crop(climate_raster, borders_hires)
climate_raster <- terra::mask(climate_raster, borders_hires)
climate_raster %>%
tm_shape() +
tm_raster(col.scale = tm_scale_continuous(values = "brewer.rd_bu"), col.free = F) +
tm_shape(borders_hires) +
tm_borders()
climate_raster <- getTerraClim(
AOI = borders_hires,
varname = "ppt",
startDate = "2020-01-01",
endDate = "2020-12-01",
verbose = T,
dryrun = FALSE
)
climate_raster <- getTerraClim(
AOI = borders_hires,
varname = "ppt",
startDate = "2020-01-01",
endDate = "2020-12-01",
verbose = T,
dryrun = FALSE
)
climater_raster
climate_raster
climate_raster <- getTerraClim(
AOI = borders_hires,
varname = "ppt",
startDate = "2020-01-01",
endDate = "2020-12-01",
verbose = T,
dryrun = FALSE
)
climate_raster <- getTerraClim(
AOI = borders_hires,
varname = "ppt",
startDate = "2020-01-01",
endDate = "2020-12-01",
verbose = T,
dryrun = FALSE
)
climate_raster <- getWorldClim(
AOI = borders_hires,
varname = "prec",
month = 1:12,
verbose = T
)
b <- getLCMAP(AOI = borders_hires, year = 2019, type = "primary landcover", ID = NULL)
climate_raster <- getTerraClim(
AOI = borders_hires,
varname = "ppt",
startDate = "2020-01-01",
endDate = "2020-12-01",
verbose = T,
dryrun = FALSE
)
climate_raster <- getWorldClim(
AOI = borders_hires,
varname = "prec",
month = 1:12,
verbose = T
)
# climate_raster <- getWorldClim(
#   AOI = borders_hires,
#   varname = "prec",
#   month = 1:12,
#   verbose = T
# )
climate_raster <- getCHIRPS(
AOI = borders_hires,
#varname = "ppt",
timeRes = "Monthly",
startDate = "2023-01-01",
endDate = "2023-12-01",
verbose = T,
dryrun = FALSE
)
climate_raster <- climate_raster$precip
climate_raster <- terra::crop(climate_raster, borders_hires)
climate_raster <- terra::mask(climate_raster, borders_hires)
climate_raster %>%
tm_shape() +
tm_raster(col.scale = tm_scale_continuous(values = "brewer.rd_bu"), col.free = F) +
tm_shape(borders_hires) +
tm_borders()
install.packages("nasapower")
climate_raster <- getTerraClim(
AOI = borders_hires,
varname = "ppt",
startDate = "2020-01-01",
endDate = "2020-12-01",
verbose = T,
dryrun = FALSE
)
climate_raster <- getTerraClim(
AOI = borders_hires,
varname = "ppt",
startDate = "2020-01-01",
endDate = "2020-12-01",
verbose = T,
dryrun = FALSE
)
b <- getISRIC_soils(AOI = borders_hires, varname = "MostProbable", verbose = T)
terra::plot(b)
climate_raster <- getWorldClim(
AOI = borders_hires,
varname = "prec",
month = 1:12,
verbose = T
)
climate_raster <- getTerraClim(
AOI = borders_hires,
varname = "ppt",
startDate = "2020-01-01",
endDate = "2020-12-01",
verbose = T,
dryrun = FALSE
)
climate_raster <- getTerraClim(
AOI = borders_hires,
varname = "ppt",
startDate = "2020-01-01",
endDate = "2020-12-01",
verbose = T,
dryrun = FALSE
)
catalog %>%
filter(id == "terraclim") %>%
select(varname, units, description)
climate_raster <- getTerraClim(
AOI = borders_hires,
varname = "ppt",
startDate = "2021-01-01",
endDate = "2021-12-01",
verbose = T,
dryrun = FALSE
)
catalog %>%
filter(id == "terraclim") %>%
select(varname, units, description)
library(tidyverse)
library(tmap)
library(sf)
library(elevatr)
library(tigris)
NY_counties <- counties(state = "NY",
cb = TRUE)
county_schenectady <- NY_counties %>%
filter(NAME == "Schenectady")
raster_elev <- get_elev_raster(county_schenectady,
z = 12,
clip = "locations")
terra::plot(raster_elev)
raster_elev_05 <- get_elev_raster(county_schenectady,
z = 6,
clip = "locations")
terra::plot(raster_elev_05)
library(rnaturalearth)
borders_hires <- ne_countries(country = "Lesotho",
scale = "large",
returnclass = "sf")
raster_elev_lesotho <- get_elev_raster(borders_hires,
z = 9,
clip = "locations")
raster_elev_lesotho %>%
tm_shape() +
tm_raster(col.scale = tm_scale_continuous(values = terrain.colors(n = 10))) +
tm_shape(borders_hires) +
tm_borders()
library(climateR)
border_NY <- ne_states(country = "United States of America", returnclass = "sf")
border_NY <- border_NY %>%
filter(name == "New York")
catalog %>%
filter(id == "gridmet") %>%
select(varname, units, description)
p <- getGridMET(AOI = border_NY,
varname = c("tmmn"),
startDate = "2025-02-04"
)
library(tidyverse)
library(tmap)
library(sf)
library(elevatr)
library(tigris)
NY_counties <- counties(state = "NY",
cb = TRUE)
county_schenectady <- NY_counties %>%
filter(NAME == "Schenectady")
raster_elev <- get_elev_raster(county_schenectady,
z = 12,
clip = "locations")
terra::plot(raster_elev)
raster_elev_05 <- get_elev_raster(county_schenectady,
z = 6,
clip = "locations")
terra::plot(raster_elev_05)
library(rnaturalearth)
borders_hires <- ne_countries(country = "Lesotho",
scale = "large",
returnclass = "sf")
raster_elev_lesotho <- get_elev_raster(borders_hires,
z = 9,
clip = "locations")
raster_elev_lesotho %>%
tm_shape() +
tm_raster(col.scale = tm_scale_continuous(values = terrain.colors(n = 10))) +
tm_shape(borders_hires) +
tm_borders()
library(climateR)
border_NY <- ne_states(country = "United States of America", returnclass = "sf")
border_NY <- border_NY %>%
filter(name == "New York")
catalog %>%
filter(id == "gridmet") %>%
select(varname, units, description)
p <- getGridMET(AOI = border_NY,
varname = c("tmmn"),
startDate = "2025-02-04"
)
p <- getGridMET(AOI = border_NY,
varname = c("tmmn"),
startDate = "2025-02-04"
)
p <- getGridMET(AOI = border_NY,
varname = c("tmmn"),
startDate = "2025-02-04"
)
p <- getGridMET(AOI = border_NY,
varname = c("tmmn"),
startDate = "2025-02-04"
)
p <- getGridMET(AOI = border_NY,
varname = c("tmmn"),
startDate = "2025-02-04"
)
p <- getGridMET(AOI = border_NY,
varname = c("tmmn"),
startDate = "2025-02-04", verbose = T
)
