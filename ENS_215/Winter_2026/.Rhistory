dams_data %>% arrange(Country, -Dam_height_m)
sum(dams_data$Reservoir_capacity_million_m3, na.rm = T)
sum(dams_data$Reservoir_area_km2, na.rm = T)
library(tidyverse)
dams_data <- read_csv("https://stahlm.github.io/ENS_215/Data/Dams_FAO_SelectCols_LabData.csv")
View(dams_data)
dams_data <- read_csv("https://stahlm.github.io/ENS_215/Data/Dams_FAO_SelectCols_LabData.csv")
ggplot(data = dams_data) +
geom_point(aes(x = Dam_height_m, y = Reservoir_capacity_million_m3))
ggplot(data = dams_data) +
geom_point(aes(x = Dam_height_m, y = Reservoir_capacity_million_m3, color = Continent))
ggplot(data = dams_data) +
geom_point(aes(x = Dam_height_m,
y = Reservoir_capacity_million_m3,
color = Continent))
ggplot(data = dams_data) +
geom_point(aes(x = Dam_height_m,
y = Reservoir_capacity_million_m3,
color = Continent))
ggplot(data = dams_data) +
geom_point(aes(x = Dam_height_m,
y = Reservoir_capacity_million_m3,
color = Continent)) +
scale_x_log10() +
scale_y_log10()
ggplot(data = dams_data) +
geom_point(aes(x = Dam_height_m,
y = Reservoir_capacity_million_m3,
color = Continent), alpha = 0.2) +
scale_x_log10() +
scale_y_log10()
ggplot(data = dams_data) +
geom_point(aes(x = Dam_height_m,
y = Reservoir_capacity_million_m3,
color = Continent)) +
scale_x_log10() +
scale_y_log10()
ggplot(data = dams_data) +
geom_point(aes(x = Dam_height_m,
y = Reservoir_capacity_million_m3,
color = Continent)) +
scale_x_log10() +
scale_y_log10() +
facet_wrap(~Continent)
dams_data %>%
group_by(Continent)
dams_data %>%
group_by(Continent) %>%
summarise(avg_height_m =  mean(Dam_height_m))
dams_data %>%
group_by(Continent) %>%
summarise(avg_height_m =  mean(Dam_height_m, na.rm = TRUE))
dams_data %>%
group_by(Continent) %>%
summarise(avg_height_m =  mean(Dam_height_m, na.rm = TRUE),
avg_area =  mean(Reservoir_area_km2, na.rm = TRUE)
)
dams_data %>%
group_by(Continent) %>%
summarise(avg_height_m =  mean(Dam_height_m, na.rm = TRUE),
avg_area =  mean(Reservoir_area_km2, na.rm = TRUE),
avg_storage = mean(Reservoir_capacity_million_m3, na.rm = TRUE)
)
dams_data %>%
group_by(Continent) %>%
summarise(avg_height_m =  mean(Dam_height_m, na.rm = TRUE),
avg_area =  mean(Reservoir_area_km2, na.rm = TRUE),
avg_storage = mean(Reservoir_capacity_million_m3, na.rm = TRUE),
avg_year = mean(Year_completed, na.rm = TRUE)
)
dams_data %>%
ggplot(aes(x = Year_completed)) +
geom_bar()
dams_data %>%
filter(Year_completed >= 1800) %>%
ggplot(aes(x = Year_completed)) +
geom_bar()
dams_data %>%
filter(Country != "United State of America") %>%
group_by(Continent) %>%
summarise(avg_height_m =  mean(Dam_height_m, na.rm = TRUE),
avg_area =  mean(Reservoir_area_km2, na.rm = TRUE),
avg_storage = mean(Reservoir_capacity_million_m3, na.rm = TRUE),
avg_year = mean(Year_completed, na.rm = TRUE)
)
dams_data %>%
#filter(Country != "United State of America") %>%
group_by(Continent) %>%
summarise(avg_height_m =  mean(Dam_height_m, na.rm = TRUE),
avg_area =  mean(Reservoir_area_km2, na.rm = TRUE),
avg_storage = mean(Reservoir_capacity_million_m3, na.rm = TRUE),
avg_year = mean(Year_completed, na.rm = TRUE)
)
dams_data %>%
filter(Country != "United States of America") %>%
group_by(Continent) %>%
summarise(avg_height_m =  mean(Dam_height_m, na.rm = TRUE),
avg_area =  mean(Reservoir_area_km2, na.rm = TRUE),
avg_storage = mean(Reservoir_capacity_million_m3, na.rm = TRUE),
avg_year = mean(Year_completed, na.rm = TRUE)
)
dams_data %>%
filter(Country != "United States of America") %>%
filter(Country != "Canada") %>%
group_by(Continent) %>%
summarise(avg_height_m =  mean(Dam_height_m, na.rm = TRUE),
avg_area =  mean(Reservoir_area_km2, na.rm = TRUE),
avg_storage = mean(Reservoir_capacity_million_m3, na.rm = TRUE),
avg_year = mean(Year_completed, na.rm = TRUE)
)
dams_data %>%
filter(Country != "United States of America") %>%
filter(Country != "Canada") %>%
filter(Country != "Mexico") %>%
group_by(Continent) %>%
summarise(avg_height_m =  mean(Dam_height_m, na.rm = TRUE),
avg_area =  mean(Reservoir_area_km2, na.rm = TRUE),
avg_storage = mean(Reservoir_capacity_million_m3, na.rm = TRUE),
avg_year = mean(Year_completed, na.rm = TRUE)
)
dams_data %>%
summarize(n_irrigation = sum(Irrigation, na.rm = T))
dams_data %>%
summarize(n_irrigation = sum(Irrigation, na.rm = T),
n_hydro = sum(Hydroelectricity, na.rm = T),
n_flood = sum(Flood_control, na.rm = T)
)
table_uses <- dams_data %>%
summarize(n_irrigation = sum(Irrigation, na.rm = T),
n_hydro = sum(Hydroelectricity, na.rm = T),
n_flood = sum(Flood_control, na.rm = T)
)
View(table_uses)
table_uses %>%
pivot_longer(names_to = "uses", values_to = "n_dams")
table_uses %>%
pivot_longer(cols = 1:3, names_to = "uses", values_to = "n_dams")
ggplot() +
geom_col(aes(x))
table_uses %>%
pivot_longer(cols = 1:3, names_to = "uses", values_to = "n_dams")
table_uses %>%
pivot_longer(cols = 1:3, names_to = "uses", values_to = "n_dams") %>%
ggplot() +
geom_col(aes(x = uses, y = n_dams))
dams_data %>%
filter(Year_completed >= 1800) %>%
ggplot() +
geom_point(aes(x = Dam_height_m,
y = Reservoir_capacity_million_m3,
color = Continent)) +
scale_y_log10() +
facet_wrap(~Continent)
dams_data %>%
filter(Year_completed >= 1800) %>%
ggplot() +
geom_point(aes(x = Dam_height_m,
y = Reservoir_capacity_million_m3,
color = Continent)) +
#scale_y_log10() +
facet_wrap(~Continent)
dams_data %>%
filter(Year_completed >= 1800) %>%
ggplot() +
geom_point(aes(x = Year_completed,
y = Dam_height_m,
color = Continent)) +
#scale_y_log10() +
facet_wrap(~Continent)
library(tidyverse)
library(readr) # we'll use this package later in the lecture to load in files from our class website
library(gapminder)
my_gap <- gapminder
mutate(my_gap,
tot_gdp = gdpPercap * pop)
my_gap <- mutate(my_gap,
tot_gdp = gdpPercap * pop)
# Your code here
my_gap <- mutate(my_gap,
log10_pop = log10(pop))
# Your code here
my_gap <- mutate(my_gap,
income_status = if_else(gdpPercap > 7500, "higher-income","lower-income"))
# Your code here
my_gap <- mutate(my_gap,
income_status = case_when(gdpPercap > 7500 ~ "high income",
gdpPercap > 3500 & gdpPercap <= 7500 ~ "middle income",
gdpPercap <= 3500 ~ "low income") )
# Your code here
my_gap <- rename(my_gap,
life_exp = lifeExp,
gdp_per_cap = gdpPercap)
select(my_gap, year, country, contains("gdp"))
# Your code here
top_n(my_gap, 10, life_exp) # top 10 countries by life expectancy
# Your code here
# Your code here
my_gap_2007 <- filter(my_gap, year == 2007)
summarize(my_gap_2007,
avg_life = mean(life_exp),
avg_gdp_per_cap = mean(gdp_per_cap) )
# Your code here
# Your code here
View(my_gap_2007)
View(my_gap)
precip_data <- read_csv("https://stahlm.github.io/ENS_215/Data/NOAA_State_Precip_LabData.csv")
state_2_get <- "CA" # Abbreviation code for state I want to select
state_data <- filter(precip_data, state_cd == state_2_get)
state_data %>% group_by(Month) %>%
summarize(m_avg = mean(Precip_inches),
m_min = min(Precip_inches),
m_max = max(Precip_inches))
state_data %>%
group_by(Year) %>%
summarize(tot_ann_precip = sum(Precip_inches))
View(precip_data)
noaa_cag_state_precipitation
precip_data <- read_csv("https://stahlm.github.io/ENS_215/Data/noaa_cag_state_precipitation.csv")
state_2_get <- "CA" # Abbreviation code for state I want to select
state_data <- filter(precip_data, state_cd == state_2_get)
precip_data <- precip_data %>%
select(YEAR, MONTH, STATE, Precip_inches = Value)
View(precip_data)
state_2_get <- "California" # State I want to select
state_data <- filter(precip_data, state_cd == state_2_get)
state_2_get <- "California" # State I want to select
state_data <- filter(precip_data, STATE == state_2_get)
precip_data <- read_csv("https://stahlm.github.io/ENS_215/Data/noaa_cag_state_precipitation.csv")
precip_data <- precip_data %>%
select(YEAR, MONTH, STATE, Precip_inches = Value) %>%
filter(YEAR < 2025)
state_2_get <- "New York" # State I want to select
state_data <- precip_data[precip_data$STATE == state_2_get, ] # get the rows with desired state, and get all columns
state_2_get <- "California" # State I want to select
state_data <- filter(precip_data, STATE == state_2_get)
state_data %>% group_by(MONTH) %>%
summarize(m_avg = mean(Precip_inches),
m_min = min(Precip_inches),
m_max = max(Precip_inches))
state_data %>%
group_by(YEAR) %>%
summarize(tot_ann_precip = sum(Precip_inches))
t3 <- precip_data %>%
group_by(STATE, YEAR) %>%
summarize(annual_precip = sum(Precip_inches))
View(t3)
t3 %>%
group_by(YEAR) %>%
top_n(1, annual_precip) %>%
arrange(YEAR)
t5 <- precip_data %>%
group_by(STATE, YEAR) %>%
summarize(tot_annual_precip = sum(Precip_inches)) %>%
group_by(STATE) %>%
summarize(mean_precip = mean(tot_annual_precip),
min_precip = min(tot_annual_precip),
max_precip = max(tot_annual_precip)) %>%
arrange(desc(mean_precip))
View(t5)
state_data <- mutate(state_data,
season = if_else(MONTH %in% c(3,4,5,6,7,8), "season-1", "season-2"))
t6 <-  state_data %>%
group_by(YEAR, season) %>%
summarize(precip_seasonal = sum(Precip_inches)) %>%
group_by(YEAR) %>%
summarize(precip_ratio = first(precip_seasonal)/sum(precip_seasonal) )
View(t6)
View(state_data)
precip_data <- precip_data %>%
select(YEAR, MONTH, STATE, Precip_inches = Value) %>%
filter(YEAR < 2025) %>%
mutate(MONTH = as.numeric(MONTH))
precip_data <- read_csv("https://stahlm.github.io/ENS_215/Data/noaa_cag_state_precipitation.csv")
precip_data <- precip_data %>%
select(YEAR, MONTH, STATE, Precip_inches = Value) %>%
filter(YEAR < 2025) %>%
mutate(MONTH = as.numeric(MONTH))
View(precip_data)
state_data <- mutate(state_data,
season = if_else(MONTH %in% c(3,4,5,6,7,8), "season-1", "season-2"))
t6 <-  state_data %>%
group_by(YEAR, season) %>%
summarize(precip_seasonal = sum(Precip_inches)) %>%
group_by(YEAR) %>%
summarize(precip_ratio = first(precip_seasonal)/sum(precip_seasonal) )
View(t6)
state_data <- mutate(state_data,
season = if_else(MONTH %in% c(3,4,5,6,7,8), "season-1", "season-2"))
t6 <-  state_data %>%
group_by(YEAR, season) %>%
summarize(precip_seasonal = sum(Precip_inches)) %>%
group_by(YEAR) %>%
summarize(precip_ratio = first(precip_seasonal)/sum(precip_seasonal) )
View(t6)
state_2_get <- "California" # State I want to select
state_data <- filter(precip_data, STATE == state_2_get)
state_data <- mutate(state_data,
season = if_else(MONTH %in% c(3,4,5,6,7,8), "season-1", "season-2"))
t6 <-  state_data %>%
group_by(YEAR, season) %>%
summarize(precip_seasonal = sum(Precip_inches)) %>%
group_by(YEAR) %>%
summarize(precip_ratio = first(precip_seasonal)/sum(precip_seasonal) )
library(tidyverse)
library(gapminder)
my_gap <- gapminder
mutate(my_gap,
tot_gdp = gdpPercap * pop)
my_gap <- mutate(my_gap,
tot_gdp = gdpPercap * pop)
# Your code here
my_gap <- mutate(my_gap,
log10_pop = log10(pop))
# Your code here
my_gap <- mutate(my_gap,
income_status = if_else(gdpPercap > 7500, "higher-income","lower-income"))
# Your code here
my_gap <- mutate(my_gap,
income_status = case_when(gdpPercap > 7500 ~ "high income",
gdpPercap > 3500 & gdpPercap <= 7500 ~ "middle income",
gdpPercap <= 3500 ~ "low income") )
# Your code here
my_gap <- rename(my_gap,
life_exp = lifeExp,
gdp_per_cap = gdpPercap)
select(my_gap, year, country, contains("gdp"))
# Your code here
top_n(my_gap, 10, life_exp) # top 10 countries by life expectancy
# Your code here
# Your code here
my_gap_2007 <- filter(my_gap, year == 2007)
summarize(my_gap_2007,
avg_life = mean(life_exp),
avg_gdp_per_cap = mean(gdp_per_cap) )
# Your code here
# Your code here
my_gap_2007 <- group_by(my_gap_2007, continent) # group the data by continent
summarize(my_gap_2007,
min_life = min(life_exp),
mean_life = mean(life_exp),
max_life = max(life_exp))
my_gap <- group_by(my_gap, continent, year) # group by continent then year
summarize(my_gap,
min_life = min(life_exp),
mean_life = mean(life_exp),
max_life = max(life_exp))
my_gap <- ungroup(my_gap) # ungroup the my_gap data
my_gap %>%
group_by(year) %>%
top_n(3, gdp_per_cap)
my_gap %>%
group_by(year) %>%
top_n(3, gdp_per_cap) %>%
arrange(year)
# Your code here
# Your code here
# Your code here
precip_data <- read_csv("https://stahlm.github.io/ENS_215/Data/noaa_cag_state_precipitation.csv")
precip_data <- precip_data %>%
select(YEAR, MONTH, STATE, Precip_inches = Value) %>%
filter(YEAR < 2025) %>%
mutate(MONTH = as.numeric(MONTH))
# Your code here
# Your code here
# Your code here
# Your code here
# Your code here
# Your code here
# Your code here
state_data <- mutate(state_data,
season = if_else(MONTH %in% c(3,4,5,6,7,8), "season-1", "season-2"))
state_2_get <- "California" # State I want to select
state_data <- filter(precip_data, STATE == state_2_get)
state_data <- mutate(state_data,
season = if_else(MONTH %in% c(3,4,5,6,7,8), "season-1", "season-2"))
t6 <-  state_data %>%
group_by(YEAR, season) %>%
summarize(precip_seasonal = sum(Precip_inches)) %>%
group_by(YEAR) %>%
summarize(precip_ratio = first(precip_seasonal)/sum(precip_seasonal) )
View(t6)
library(tidyverse)
library(gapminder)
gap_data <- gapminder
View(gap_data)
gap_data %>%
filter(year >= 1980) %>%
filter(continent == "Asia" | continent == "Africa")
gap_data %>%
filter(year >= 1980) %>%
#filter(continent == "Asia"| continent == "Africa")
filter(continent %in% c("Asia", "Africa"))
my_continents <- c("Asia", "Africa")
gap_data %>%
filter(year >= 1980) %>%
#filter(continent == "Asia"| continent == "Africa")
filter(continent %in% my_continents)
my_continents <- c("Asia", "Africa")
gap_data %>%
filter(year >= 1980) %>%
#filter(continent == "Asia"| continent == "Africa")
filter(continent %in% my_continents) %>%
arrange(lifeExp)
my_continents <- c("Asia", "Africa")
table_01 <- gap_data %>%
filter(year >= 1980) %>%
#filter(continent == "Asia"| continent == "Africa")
filter(continent %in% my_continents) %>%
arrange(lifeExp)
View(table_01)
my_continents <- c("Asia", "Africa")
table_01 <- gap_data %>%
filter(year >= 1980) %>%
#filter(continent == "Asia"| continent == "Africa")
filter(continent %in% my_continents) %>%
arrange(lifeExp)
table_01
avg_life <- mean(gap_data$lifeExp)
avg_life
gap_data %>%
filter(lifeExp > avg_life,
pop > 20*10^6
)
table_02 <- gap_data %>%
filter(lifeExp > avg_life,
pop > 20*10^6
)
table_02
my_gap <- gapminder
View(my_gap)
my_gap %>%
mutate(tot_gdp = gdpPercap * pop)
my_gap <- my_gap %>%
mutate(tot_gdp = gdpPercap * pop)
my_gap %>%
filter(year == 1952) %>%
arrange(-tot_gdp)
my_gap %>%
filter(year == 2007) %>%
arrange(-tot_gdp)
my_gap <- my_gap %>%
mutate(log10_pop = log10(pop))
my_gap <- my_gap %>%
mutate(gdp_percap_ratio = gdpPercap/max(gdpPercap))
my_gap <- my_gap %>%
mutate(income_status = if_else(gdpPercap > 7500, "higher-income", "lower-income")
)
my_gap <- my_gap %>%
mutate(income_status = case_when(gdpPercap > 7500 ~ "high-income",
gdpPercap > 3500 & gdpPercap <= 7500 ~ "middle-income",
gdpPercap <= 3500 ~ "low-income"
)
)
my_gap %>%
filter(year == 1982)
my_gap %>%
filter(year == 1952) %>%
top_n(10, lifeExp)
table_01 <- my_gap %>%
filter(year == 1952) %>%
top_n(10, lifeExp)
table_01
install.packages("imgpalr")
library(imgpalr)
image_pal(file = "C:/Users/stahlm/Downloads/Johannes_Vermeer_-_The_Geographer_-_Google_Art_Project.jpg", n = 6, type = "qual")
library(imgpalr)
image_pal(file = "C:/Users/stahlm/Downloads/Johannes_Vermeer_-_The_Geographer_-_Google_Art_Project.jpg", n = 6, type = "qual")
image_pal(file = "C:/Users/stahlm/Downloads/Johannes_Vermeer_-_The_Geographer_-_Google_Art_Project.jpg", n = 6,
type = "qual", plot = T)
image_pal(file = "C:/Users/stahlm/Downloads/Johannes_Vermeer_-_The_Geographer_-_Google_Art_Project.jpg", n = 6,
type = "qual", plot = T, label_color = "grey90")
set.seed(1)
image_pal(file = "C:/Users/stahlm/Downloads/Johannes_Vermeer_-_The_Geographer_-_Google_Art_Project.jpg", n = 6,
type = "qual", plot = T, label_color = "grey90")
set.seed(1)
image_pal(file = "C:/Users/stahlm/Downloads/Johannes_Vermeer_-_The_Geographer_-_Google_Art_Project.jpg", n = 6,
type = "qual", plot = T, label_color = "grey90")
image_pal(file = "C:/Users/stahlm/Downloads/Jean-Léon_Gérôme_-_Riders_Crossing_The_Desert_(1870)_HQ.jpg", n = 6,
type = "qual", plot = T, label_color = "grey90")
image_pal(file = "C:/Users/stahlm/Downloads/Jean-Léon_Gérôme_-_Riders_Crossing_The_Desert_(1870)_HQ.jpg", n = 9,
type = "qual", plot = T, label_color = "grey90")
library(tidyverse)
library(gapminder)
library(imgpalr)
pal2use <- image_pal(file = "C:/Users/stahlm/Downloads/Jean-Léon_Gérôme_-_Riders_Crossing_The_Desert_(1870)_HQ.jpg", n = 9,
type = "qual", plot = T, label_color = "grey90")
pal2use
pal2use <- image_pal(file = "C:/Users/stahlm/Downloads/Jean-Léon_Gérôme_-_Riders_Crossing_The_Desert_(1870)_HQ.jpg", n = 9,
type = "qual", plot = T, label_color = "grey90")
pal2use
gapminder %>%
ggplot(aes(x = gdpPercap, y = lifeExp, fill = continent)) +
geom_point(shape = 21) +
scale_fill_manual(values = pal2use)
gapminder %>%
ggplot(aes(x = gdpPercap, y = lifeExp, fill = continent)) +
geom_point(shape = 21) +
scale_fill_manual(values = pal2use) +
theme_classic()
pal2use <- image_pal(file = "C:/Users/stahlm/Downloads/Jean-Léon_Gérôme_-_Riders_Crossing_The_Desert_(1870)_HQ.jpg", n = 9,
type = "seq", plot = T, label_color = "grey90")
pal2use
gapminder %>%
ggplot(aes(x = gdpPercap, y = lifeExp, fill = continent)) +
geom_point(shape = 21) +
scale_fill_manual(values = pal2use) +
theme_classic()
pal2use <- image_pal(file = "C:/Users/stahlm/Downloads/Jean-Léon_Gérôme_-_Riders_Crossing_The_Desert_(1870)_HQ.jpg", n = 9,
type = "qual", plot = T, label_color = "grey90")
pal2use
image_quantmap(file = "C:/Users/stahlm/Downloads/Johannes_Vermeer_-_The_Geographer_-_Google_Art_Project.jpg",
pal = pal2use, plot = T)
