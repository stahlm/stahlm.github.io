---
title: "Global Dams Data"
author: "Meghan Pearce"
date: "01-20-2020"
output: 
  prettydoc::html_pretty:
    theme: cayman
    highlight: github
    toc: TRUE
---
***Introduction***
There's a lot of positive and negative affects of dams on people and communities. Some positives are flood control, they supply water and hydroelectic power and they also helo with irrigation. However, they may be outweighed by the negatives as 40-80 million people have been displaced by dams, they cause infectious disease to spread more easily as they're breeding sites for parasitic organisms in the tropics. The dams are also dangerous as they trigger seismic activity and in May of 2008 a dam being built launched a 7.9 magnitude earthquake in Sichuan and ended up killing 80,000 people (http://12.000.scripts.mit.edu/mission2017/dams-and-reservoirs/). So although the dams we are looking at today may be helping people in a lot of ways, they could also be hurting a lot of people. Throughout this lab we'll take a closer look at dimensions of dams and use to see if they are in fact helpful.

***Examining Data***

```{r}
library(tidyverse)
library(plotly)
library(prettydoc)
```

```{r}
dams_data <- read_csv("https://stahlm.github.io/ENS_215/Data/Dams_FAO_SelectCols_LabData.csv")
```
```{r}
dams_data <- select(dams_data, Country, Continent, Dam_name, Dam_height_m, Major_basin, everything())
```
```{r}
summary(dams_data)
```

This data set has 14,216 rows and 22 columns. 
```{r}
ggplot(dams_data, aes(x=Reservoir_capacity_million_m3, y=Reservoir_area_km2, color = Continent)) + geom_point() #comparing resevoir area to capacity in a scatter plot
```
The graph above does't show that much correlation between resevoir area and capacity. Most things have a pretty low capacity and area and with there being so many outliers it makes it hard to see any actual correlations.

```{r}
ggplot(dams_data, aes(x=Reservoir_capacity_million_m3, y=Dam_height_m)) + 
  geom_point(alpha=0.25) + 
  scale_x_log10() + scale_y_log10() + 
  facet_wrap(~Continent)
#creating a scatter plot by continent to see the correlation between dam height and capacity
```
These plots came out a lot better than the previous graphs. There is a clear positive correlation between dam height and capacity which tells us that the taller the dam, the more likely it is to hold a larger amount of water. There are a lot of outliers in Asia not followinf a linear correlation and a few in the 
```{r}
dams_data %>% group_by(Continent) %>% summarize(mean_height_m=mean(Dam_height_m, na.rm=T), mean_area=mean(Reservoir_area_km2, na.rm=T), mean_storage=mean(Reservoir_capacity_million_m3, na.rm=T)) #calculating average area, height and storage
```
The mean height throughout the continents tend to be around 33, except for Europe and Oceania which stray higher. A lot of the continents have pretty low areas on average, except for Africa which has a mean area of 223.86, which is a lot higher than the other values and particularly high for its mean height. Lastly the mean storage ranges a lot by continent but Europe has the highest, which matches us with our previous graph showing that height and storage are in fact correlated

```{r}
dams_data %>% ggplot(aes(x= Continent, y=Reservoir_capacity_million_m3)) + 
  scale_y_log10() +
  geom_boxplot()
```
I think it's interesting that Europe and Oceania have very consistent sized dams with few outliers while the other continents have a super large range between their points. Asia and the Americas in particular are very spread out with a huge amount of outliers.

***Additional analysis***

```{r}
#Make a summary table with additional information about dams and resevoirs
```


```{r}
dams_data %>% filter(Hydroelectricity == 1) %>% 
  ggplot(aes(x=Year_completed, y=Dam_height_m)) + geom_point() + facet_wrap(~Continent)
```

It's interesting to see that dams used for hydroelectricity are really only built in the US before the 1900s (with one exception in Asia) but after 1900 the production of dams began to increase.

```{r}
numberdams <- nrow(dams_data)
dams_data %>% ggplot(aes(x=Year_completed, y=numberdams)) + geom_col()
```
This graph shows the total number of dams over time. The production of dams was steadily increasing until the end of World War II, which once over the production of dams skyrocketed. 

```{r}
ireland_norway_data <- dams_data %>% filter(Country == "Ireland" | Country == "Norway")
```

```{r}
ireland_Norway_Plot <- ggplot(ireland_norway_data, aes(x=Reservoir_capacity_million_m3, y=Dam_height_m, color = Country)) + geom_point()
ggplotly(ireland_Norway_Plot)
```
This is interesting to see that height and capacity aren't directly related as shown with some super high dams don't gave high resevoir capacity. The most interesting value to me is the 142m high dam that has a resevoir capacity of 140 million meters cubed. It's also clear that Norway has a lot more dam information than Ireand does so we don't get a super diverse grouping which I would have hoped for.

```{r}
dams_data %>% filter(Irrigation == 1) %>% 
  ggplot(aes(x=Year_completed, y=Dam_height_m)) + geom_point() + facet_wrap(~Continent)
```
These plots show that as more resources and better technology became available, dams were able to be built higher so some dams get to be super tall later on, but on average theyr're still kept at a pretty low overal height

```{r}
dams_data %>% filter(Water_supply == 1) %>% 
  ggplot(aes(x=Year_completed, y=Dam_height_m)) + geom_point() + facet_wrap(~Continent)
#checking height of water supply dams
```
There's typically a lot of dams used for water supply as shown above, but it is interesting to note that Oceania has a lot less points across the board, meaning they don't use dams as much in general or specifically don't use a lot of dams for water supply.
```{r}
dams_data %>% filter(Flood_control == 1) %>% 
  ggplot(aes(x=Year_completed, y=Dam_height_m)) + geom_point() + facet_wrap(~Continent)
```

```{r}
dams_data %>% filter(Navigation == 1) %>% 
  ggplot(aes(x=Year_completed, y=Dam_height_m)) + geom_point() + facet_wrap(~Continent)
```
This data shows that dams typically aren't used for navigation, although the Americas and Europe do use a fair amount it's a lot less than other categories and Oceania doesn't use any.
```{r}
dams_data %>% filter(Recreation == 1) %>% 
  ggplot(aes(x=Year_completed, y=Dam_height_m)) + geom_point() + facet_wrap(~Continent)
```
This data shows that recreationa dams aren't used to a great extent in a lot of places until you look at the America's where there's a bunch in play. However, this may be due to the fact that a lot of dams are mutiuse and could be used for both recreation and other things.
```{r}
dams_data %>% filter(Pollution_control == 1) %>% 
  ggplot(aes(x=Year_completed, y=Dam_height_m)) + geom_point() + facet_wrap(~Continent)
```
Pollution control isn't a big aspect on dams and rarely used. We can see this by the small number of data points and the fact Oceania has no data to be found on it.
```{r}
dams_data %>% filter(Livestock_rearing == 1) %>% 
  ggplot(aes(x=Year_completed, y=Dam_height_m)) + geom_point() + facet_wrap(~Continent)
```
Livestock rearing dams are used in Asia and Africa and slightly in the Americas but are not seen in Oceania and Europe. This most likely means that these dams aren't found to be that helpful.

For the previous set of graphs I wanted to see how dam sizes changed based on use. This varied more than I expected it to but not by super high amounts. Dams used for recreation, navigation and pollution were typically all below 150m tall. dams used for livestock were typically under 50m except when made in Asia which had some dams around 150m high, which is a lot higher than I would have expected to be neccesary to rear livestock. Both flood control and irrigation dams were typically found beneath 200m high even though irrigation did have a few outliers above 600m, which I'm not sure why a dam this large was necessary for irrigation. Water supply dams were typically found below 100m and hydroelectricity went up to 300m high, which makes sense because if you have a larger supply of water you can produce a larger amount of electricity. Some of these outliers could have been due to the fact that there are multipurpose dams (http://12.000.scripts.mit.edu/mission2017/dams-and-reservoirs/) so they would have to be large for some of their functions, but not as large for the others.

***Conclusion***
Throughout this lab we examined dams and how they are used. Most of the dams used were for water supply and flood control, which typically seems to be the things dams can do best. 
There were many things that came as a surprise to me during this lab such as the high amount of recreational dams throughout the Americas and the fact that area and capacity aren't really correlated. Through looking at this data it does seem that there are a lot of positive implications of dams but you can't tell what negative implications there are based on this data alone. If to look through this information again I would look into how to add another value of useful vs non useful/dangerous in order to have a correlation with the readings done that show a lot of dams are in fact hurting us rather than helping us.