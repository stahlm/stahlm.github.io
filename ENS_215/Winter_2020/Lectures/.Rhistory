streamflows %>% summarize_at(vars(flow_cfs, Year), .funs = c(mean, median), na.rm = T)
flow_table <- streamflows %>%
group_by(site_no, Year) %>%
summarize(flow_mean = round(mean(flow_cfs, na.rm = T)))
head(flow_table)
flow_table <- streamflows %>%
group_by(site_no, Year) %>%
summarize(flow_mean = round(mean(flow_cfs, na.rm = T)))
flow_table
streamflows %>%
ggplot(aes(x = dateTime, y = flow_cfs)) +
geom_line() +
scale_y_log10() +
theme_bw() +
labs(y = "Flow (cfs)",
x = "")
facet_wrap(~site_no, ncol = 1)
streamflows %>%
ggplot(aes(x = dateTime, y = flow_cfs)) +
geom_line() +
scale_y_log10() +
theme_bw() +
labs(y = "Flow (cfs)",
x = "") +
facet_wrap(~site_no, ncol = 1)
streamflows %>%
ggplot(aes(x = dateTime, y = flow_cfs)) +
geom_line() +
scale_x_log10(labels = trans_format('log10', math_format(10^.x)) ) +
theme_bw() +
labs(y = "Flow (cfs)",
x = "") +
facet_wrap(~site_no, ncol = 1)
streamflows %>%
ggplot(aes(x = dateTime, y = flow_cfs)) +
geom_line() +
scale_x_log10(labels = scales::trans_format('log10', math_format(10^.x)) ) +
theme_bw() +
labs(y = "Flow (cfs)",
x = "") +
facet_wrap(~site_no, ncol = 1)
streamflows %>%
ggplot(aes(x = dateTime, y = flow_cfs)) +
geom_line() +
scale_x_log10(labels = scales::trans_format('log10', scales::math_format(10^.x)) ) +
theme_bw() +
labs(y = "Flow (cfs)",
x = "") +
facet_wrap(~site_no, ncol = 1)
streamflows %>%
ggplot(aes(x = dateTime, y = flow_cfs)) +
geom_line() +
scale_y_log10(labels = scales::trans_format('log10', scales::math_format(10^.x)) ) +
theme_bw() +
labs(y = "Flow (cfs)",
x = "") +
facet_wrap(~site_no, ncol = 1)
streamflows_wide %>%
ggplot(aes(x = `01335754`, y = `01357500`)) +
geom_point(alpha = 0.25) +
geom_abline(slope = 1, intercept = 0, color = "blue", size = 1.5) +
#facet_wrap(~Month) +
theme_bw()
streamflows_wide %>%
ggplot(aes(x = `01335754`, y = `01357500`)) +
geom_point(alpha = 0.25) +
geom_abline(slope = 1, intercept = 0, color = "blue", size = 1.5) +
#facet_wrap(~Month) +
theme_bw()
streamflows_wide %>%
ggplot(aes(x = `01335754`, y = `01357500`)) +
geom_point(alpha = 0.25) +
geom_abline(slope = 1, intercept = 0, color = "blue", size = 1.5) +
#facet_wrap(~Month) +
coord_equal(ratio = 1) +
theme_bw()
streamflows_wide %>%
ggplot(aes(x = `01335754`, y = `01357500`)) +
geom_point(alpha = 0.25) +
geom_abline(slope = 1, intercept = 0, color = "blue", size = 1.5) +
scale_x_continuous(labels = scales::trans_format('log10', scales::math_format(10^.x)) )
#facet_wrap(~Month) +
coord_equal(ratio = 1) +
theme_bw()
streamflows_wide %>%
ggplot(aes(x = `01335754`, y = `01357500`)) +
geom_point(alpha = 0.25) +
geom_abline(slope = 1, intercept = 0, color = "blue", size = 1.5) +
scale_x_continuous(labels = scales::trans_format('log10', scales::math_format(10^.x)) ) +
#facet_wrap(~Month) +
coord_equal(ratio = 1) +
theme_bw()
streamflows_wide %>%
ggplot(aes(x = `01335754`, y = `01357500`)) +
geom_point(alpha = 0.25) +
geom_abline(slope = 1, intercept = 0, color = "blue", size = 1.5) +
scale_x_continuous(labels = scales::trans_format('log10', scales::math_format(10^.x)),
breaks = c(10, 100, 1000, 10000, 100000)) +
#facet_wrap(~Month) +
coord_equal(ratio = 1) +
theme_bw()
streamflows_wide %>%
ggplot(aes(x = `01335754`, y = `01357500`)) +
geom_point(alpha = 0.25) +
geom_abline(slope = 1, intercept = 0, color = "blue", size = 1.5) +
scale_x_continuous(labels = scales::trans_format('log10', scales::math_format(10^.x))) +
#facet_wrap(~Month) +
coord_equal(ratio = 1) +
theme_bw()
streamflows_wide %>%
ggplot(aes(x = `01335754`, y = `01357500`)) +
geom_point(alpha = 0.25) +
geom_abline(slope = 1, intercept = 0, color = "blue", size = 1.5) +
scale_x_continuous() +
#facet_wrap(~Month) +
coord_equal(ratio = 1) +
theme_bw()
streamflows_wide %>%
ggplot(aes(x = `01335754`, y = `01357500`)) +
geom_point(alpha = 0.25) +
geom_abline(slope = 1, intercept = 0, color = "blue", size = 1.5) +
coord_equal(ratio = 1) +
theme_bw()
streamflows_wide %>%
ggplot(aes(x = `01335754`, y = `01357500`)) +
geom_point(alpha = 0.25) +
geom_abline(slope = 1, intercept = 0, color = "blue", size = 1.5) +
coord_equal(ratio = 1) +
labs(x = "Mohawk flows (cfs)",
y = "Hudson flows (cfs)") +
theme_bw()
streamflows_wide %>%
ggplot(aes(x = `01335754`, y = `01357500`)) +
geom_point(alpha = 0.25) +
geom_abline(slope = 1, intercept = 0, color = "blue", size = 1.5) +
coord_equal(ratio = 1) +
labs(x = "Mohawk flows (cfs)",
y = "Hudson flows (cfs)",
caption = "Mohawk (01357500), Hudson (01335754)") +
theme_bw()
streamflows_wide %>%
ggplot(aes(x = `01335754`, y = `01357500`)) +
geom_point(alpha = 0.25) +
geom_abline(slope = 1, intercept = 0, color = "blue", size = 1.5) +
xlim(0,75000) +
ylim(0,75000) +
coord_equal(ratio = 1) +
labs(x = "Mohawk flows (cfs)",
y = "Hudson flows (cfs)",
caption = "Mohawk (01357500), Hudson (01335754)") +
theme_bw()
streamflows_wide %>%
ggplot(aes(x = `01335754`, y = `01357500`)) +
geom_point(alpha = 0.25) +
geom_abline(slope = 1, intercept = 0, color = "blue", size = 1.5) +
xlim(0,80000) +
ylim(0,80000) +
coord_equal(ratio = 1) +
labs(x = "Mohawk flows (cfs)",
y = "Hudson flows (cfs)",
caption = "Mohawk (01357500), Hudson (01335754)") +
theme_bw()
streamflows_wide %>%
ggplot(aes(x = `01335754`, y = `01357500`)) +
geom_point(alpha = 0.2) +
geom_abline(slope = 1, intercept = 0, color = "blue", size = 1.5) +
xlim(0,80000) +
ylim(0,80000) +
coord_equal(ratio = 1) +
labs(x = "Mohawk flows (cfs)",
y = "Hudson flows (cfs)",
caption = "Mohawk (01357500), Hudson (01335754)") +
theme_bw()
library(tidyverse)
#library(readr)
library(tidyverse)
knitr::opts_chunk$set(comment=NA, warning = F)
library(tidyverse)
precip_untidy_MA <- read_csv("https://stahlm.github.io/ENS_215/Data/precip_untidy_MA.csv")
library(kableExtra)
precip_untidy_MA %>%
kable() %>%
kable_styling(bootstrap_options = "condensed", position = "center")
precip_tidy_MA <- precip_untidy_MA %>%
pivot_longer(cols = month.abb, names_to = "Month", values_to = "Precip_inches")
precip_temp_untidy_CA <- read_csv("https://stahlm.github.io/ENS_215/Data/CA_temp_precip_untidy.csv")
precip_temp_untidy_CA
# Your code here
Rivers_to_clean <- read_csv("https://stahlm.github.io/ENS_215/Data/Rivers_sep_unite.csv")
drop_na(Rivers_to_clean) # drop NAs (look at all columns)
drop_na(Rivers_to_clean, Rank) # drop NAs (look at Rank column)
replace_na(Rivers_to_clean, list(Discharge_m3_s = -9999)) # replace the missing discharge data with -9999
Rivers_to_clean %>%
fill(Discharge_m3_s, .direction = "up")
Rivers_to_clean <- Rivers_to_clean %>%
separate(col = Length_Drainage_Ratio, into = c("Length_km", "Area_km2") , sep = "/")
Rivers_to_clean
Rivers_to_clean %>%
unite(Length_km, Area_km2, col = "Length_Area_Ratio", sep = "/")
Bangladesh_gw <- read_csv("https://stahlm.github.io/ENS_215/Data/BGS_DPHE_to_clean.csv")
head(Bangladesh_gw)
# Your code here
# We'll select only data from year 2000 onward, add a column with the month, remove any missing data which is recorded as a negative number
streamflows <- read_csv("https://stahlm.github.io/ENS_215/Data/Hud_Mow_streamflow_data.csv") %>%
filter(flow_cfs >= 0,
lubridate::year(dateTime) >= 2000) %>%
mutate(Month = lubridate::month(dateTime),
Year = lubridate::year(dateTime)) %>%
select(dateTime, Year, Month, site_no, flow_cfs)
flow_table <- streamflows %>%
group_by(site_no, Year) %>%
summarize(flow_mean = round(mean(flow_cfs, na.rm = T)))
flow_table
flow_table %>%
mutate(flow_mean = round(flow_mean)) %>%
pivot_wider(names_from = Year, values_from = flow_mean) %>%
kableExtra::kable() %>%
kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed"), full_width = F)
streamflows_wide <- streamflows %>%
pivot_wider(names_from = site_no, values_from = flow_cfs)
View(streamflows)
streamflows %>%
filter(site_no == "01357500") %>%
group_by(Year, Month) %>%
summarize(mean_flow = mean(flow_cfs, na.rm = T))
streamflows %>%
filter(site_no == "01357500") %>%
group_by(Year, Month) %>%
summarize(mean_flow = mean(flow_cfs, na.rm = T)) %>%
mutate(Year = Year - min(Year))
streamflows %>%
filter(site_no == "01357500") %>%
group_by(Year, Month) %>%
summarize(mean_flow = mean(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = Year - min(Year))
streamflows %>%
filter(site_no == "01357500") %>%
group_by(Year, Month) %>%
summarize(mean_flow = mean(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year))
streamflows %>%
filter(site_no == "01357500") %>%
group_by(Year, Month) %>%
summarize(mean_flow = mean(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year)) %>%
ggplot(aes(x = Year, y = mean_flow)) %>%
geom_point() +
facet_wrap(~ Month)
streamflows %>%
filter(site_no == "01357500") %>%
group_by(Year, Month) %>%
summarize(mean_flow = mean(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year)) %>%
ggplot(aes(x = Year, y = mean_flow)) +
geom_point() +
facet_wrap(~ Month)
streamflows %>%
filter(site_no == "01357500") %>%
group_by(Year, Month) %>%
summarize(mean_flow = mean(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year)) %>%
ggplot(aes(x = Year, y = mean_flow)) +
geom_point() +
theme_classic() +
facet_wrap(~ Month, nrow = 1)
streamflows %>%
filter(site_no == "01357500") %>%
group_by(Year, Month) %>%
summarize(mean_flow = mean(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year)) %>%
ggplot(aes(x = Year, y = mean_flow)) +
geom_point() +
theme_bw() +
facet_wrap(~ Month, nrow = 1)
streamflows %>%
filter(site_no == "01357500") %>%
group_by(Year, Month) %>%
summarize(mean_flow = mean(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year)) %>%
ggplot(aes(x = Year, y = mean_flow)) +
geom_point() +
theme_bw() +
facet_wrap(~ Month, nrow = 1)
streamflows %>%
filter(site_no == "01357500") %>%
group_by(Year, Month) %>%
summarize(mean_flow = mean(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year)) %>%
ggplot(aes(x = Year, y = mean_flow)) +
geom_point() +
theme_bw() +
facet_wrap(~ Month, nrow = 1)
streamflows %>%
filter(site_no == "01357500") %>%
group_by(Year, Month) %>%
summarize(mean_flow = mean(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year)) %>%
ggplot(aes(x = Year, y = mean_flow)) +
geom_point() +
theme_bw() +
facet_wrap(~ Month, nrow = 1)
streamflows %>%
filter(site_no == "01357500") %>%
group_by(Year, Month) %>%
summarize(mean_flow = mean(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year)) %>%
ggplot(aes(x = Year, y = mean_flow)) +
geom_point() +
theme_bw() +
facet_wrap(~ Month, nrow = 1)
streamflows %>%
filter(site_no == "01357500") %>%
group_by(Year, Month) %>%
summarize(mean_flow = mean(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year)) %>%
ggplot(aes(x = Year, y = mean_flow)) +
geom_point() +
geom_smooth(method = "lm") +
theme_bw() +
facet_wrap(~ Month, nrow = 1)
streamflows %>%
filter(site_no == "01335754") %>%
group_by(Year, Month) %>%
summarize(mean_flow = mean(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year)) %>%
ggplot(aes(x = Year, y = mean_flow)) +
geom_point() +
geom_smooth(method = "lm") +
theme_bw() +
facet_wrap(~ Month, nrow = 1)
streamflows <- read_csv("https://stahlm.github.io/ENS_215/Data/Hud_Mow_streamflow_data.csv") %>%
filter(flow_cfs >= 0,
lubridate::year(dateTime) >= 1980) %>%
mutate(Month = lubridate::month(dateTime),
Year = lubridate::year(dateTime)) %>%
select(dateTime, Year, Month, site_no, flow_cfs)
streamflows %>%
filter(site_no == "01335754") %>%
group_by(Year, Month) %>%
summarize(mean_flow = mean(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year)) %>%
ggplot(aes(x = Year, y = mean_flow)) +
geom_point() +
geom_smooth(method = "lm") +
theme_bw() +
facet_wrap(~ Month, nrow = 1)
streamflows <- read_csv("https://stahlm.github.io/ENS_215/Data/Hud_Mow_streamflow_data.csv") %>%
filter(flow_cfs >= 0,
lubridate::year(dateTime) >= 1950) %>%
mutate(Month = lubridate::month(dateTime),
Year = lubridate::year(dateTime)) %>%
select(dateTime, Year, Month, site_no, flow_cfs)
streamflows %>%
filter(site_no == "01335754") %>%
group_by(Year, Month) %>%
summarize(mean_flow = mean(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year)) %>%
ggplot(aes(x = Year, y = mean_flow)) +
geom_point() +
geom_smooth(method = "lm") +
theme_bw() +
facet_wrap(~ Month, nrow = 1)
streamflows <- read_csv("https://stahlm.github.io/ENS_215/Data/Hud_Mow_streamflow_data.csv") %>%
filter(flow_cfs >= 0,
lubridate::year(dateTime) >= 1950) %>%
mutate(Month = lubridate::month(dateTime),
Year = lubridate::year(dateTime)) %>%
select(dateTime, Year, Month, site_no, flow_cfs)
streamflows %>%
filter(site_no == "01335754") %>%
group_by(Year, Month) %>%
summarize(mean_flow = mean(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year)) %>%
ggplot(aes(x = Year, y = mean_flow)) +
geom_point() +
geom_smooth(method = "lm") +
theme_bw() +
facet_wrap(~ Month)
streamflows <- read_csv("https://stahlm.github.io/ENS_215/Data/Hud_Mow_streamflow_data.csv") %>%
filter(flow_cfs >= 0,
lubridate::year(dateTime) >= 1950) %>%
mutate(Month = lubridate::month(dateTime),
Year = lubridate::year(dateTime)) %>%
select(dateTime, Year, Month, site_no, flow_cfs)
streamflows %>%
filter(site_no == "01335754") %>%
group_by(Year, Month) %>%
summarize(mean_flow = mean(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year)) %>%
ggplot(aes(x = Year, y = mean_flow)) +
geom_point() +
geom_smooth(method = "lm") +
theme_bw() +
facet_wrap(~ Month)
streamflows <- read_csv("https://stahlm.github.io/ENS_215/Data/Hud_Mow_streamflow_data.csv") %>%
filter(flow_cfs >= 0,
lubridate::year(dateTime) >= 1950) %>%
mutate(Month = lubridate::month(dateTime),
Year = lubridate::year(dateTime)) %>%
select(dateTime, Year, Month, site_no, flow_cfs)
streamflows %>%
filter(site_no == "01335754") %>%
group_by(Year, Month) %>%
summarize(mean_flow = mean(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year)) %>%
ggplot(aes(x = Year, y = mean_flow)) +
geom_point() +
geom_smooth(method = "lm") +
theme_bw() +
facet_wrap(~ Month, scales = "free_y")
streamflows <- read_csv("https://stahlm.github.io/ENS_215/Data/Hud_Mow_streamflow_data.csv") %>%
filter(flow_cfs >= 0,
lubridate::year(dateTime) >= 1950) %>%
mutate(Month = lubridate::month(dateTime),
Year = lubridate::year(dateTime)) %>%
select(dateTime, Year, Month, site_no, flow_cfs)
streamflows %>%
filter(site_no == "01357500") %>%
group_by(Year, Month) %>%
summarize(mean_flow = mean(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year)) %>%
ggplot(aes(x = Year, y = mean_flow)) +
geom_point() +
geom_smooth(method = "lm") +
theme_bw() +
facet_wrap(~ Month, scales = "free_y")
streamflows <- read_csv("https://stahlm.github.io/ENS_215/Data/Hud_Mow_streamflow_data.csv") %>%
filter(flow_cfs >= 0,
lubridate::year(dateTime) >= 1950) %>%
mutate(Month = lubridate::month(dateTime),
Year = lubridate::year(dateTime)) %>%
select(dateTime, Year, Month, site_no, flow_cfs)
streamflows %>%
filter(site_no == "01357500") %>%
group_by(Year, Month) %>%
summarize(flow_stat = median(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year)) %>%
ggplot(aes(x = Year, y = flow_stat)) +
geom_point() +
geom_smooth(method = "lm") +
theme_bw() +
facet_wrap(~ Month, scales = "free_y")
streamflows <- read_csv("https://stahlm.github.io/ENS_215/Data/Hud_Mow_streamflow_data.csv") %>%
filter(flow_cfs >= 0,
lubridate::year(dateTime) >= 1950) %>%
mutate(Month = lubridate::month(dateTime),
Year = lubridate::year(dateTime)) %>%
select(dateTime, Year, Month, site_no, flow_cfs)
streamflows %>%
filter(site_no == "01357500") %>%
group_by(Year, Month) %>%
summarize(flow_stat = min(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year)) %>%
ggplot(aes(x = Year, y = flow_stat)) +
geom_point() +
geom_smooth(method = "lm") +
theme_bw() +
facet_wrap(~ Month, scales = "free_y")
streamflows <- read_csv("https://stahlm.github.io/ENS_215/Data/Hud_Mow_streamflow_data.csv") %>%
filter(flow_cfs >= 0,
lubridate::year(dateTime) >= 1950) %>%
mutate(Month = lubridate::month(dateTime),
Year = lubridate::year(dateTime)) %>%
select(dateTime, Year, Month, site_no, flow_cfs)
streamflows %>%
filter(site_no == "01357500") %>%
group_by(Year, Month) %>%
summarize(flow_stat = max(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year)) %>%
ggplot(aes(x = Year, y = flow_stat)) +
geom_point() +
geom_smooth(method = "lm") +
theme_bw() +
facet_wrap(~ Month, scales = "free_y")
streamflows <- read_csv("https://stahlm.github.io/ENS_215/Data/Hud_Mow_streamflow_data.csv") %>%
filter(flow_cfs >= 0,
lubridate::year(dateTime) >= 1950) %>%
mutate(Month = lubridate::month(dateTime),
Year = lubridate::year(dateTime)) %>%
select(dateTime, Year, Month, site_no, flow_cfs)
streamflows %>%
filter(site_no == "01357500") %>%
group_by(Year, Month) %>%
summarize(flow_stat = mean(flow_cfs, na.rm = T)) %>%
ungroup() %>%
mutate(Year = 1 + Year - min(Year)) %>%
ggplot(aes(x = Year, y = flow_stat)) +
geom_point() +
geom_smooth(method = "lm") +
theme_bw() +
facet_wrap(~ Month, scales = "free_y")
