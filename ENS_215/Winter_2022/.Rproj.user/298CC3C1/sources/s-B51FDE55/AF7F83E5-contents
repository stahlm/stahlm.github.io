---
title: "Lab Week 2: Getting Started With R and EPA Fuel Efficency Data"
author: "Ian Plummer"
output:
  html_document:
    df_print: paged
---
# Introduction 
In this lab we will be looking two data sets related to fuel efficiency of commercial vehicles in the United States. We will not only explore the importance of these data sets in an environmental science perspective, but also review key tools and techniques that we can use in R to assess this data. Thus, this lab serves the two purposes of familiarizing us with the basic workings of R and R studio, as well as serving to teach us about the environmental implications of vehicle use and consumer choice. 

Vehicle usage makes up more than [half](https://www.fueleconomy.gov/feg/climate.shtml) of the average Americans annual CO2 emissions. Addressing the largest parts of our carbon footprint is a great place to start our individual efforts to cut down on carbon emissions. It may seem unfair to put this burden on the consumer, especially given the fact that industry (which controls much of the transportation and electrical grids) produces significantly [more carbon](https://www.epa.gov/ghgemissions/sources-greenhouse-gas-emissions) than the average person does. In the end it is unfair to the average person, especially poorer Americans and global citizens who will be affected by climate change much more than the wealthy. Yet eliminating reliance on oil and fossil fuels in the near future may be physically impossible. Given [how much of the global economy](https://www.fueleconomy.gov/feg/oildep.shtml) is based on petroleum export, we cannot just pull the plug and move the system to some other energy source without causing significant impacts to supply chains and work force. We also don't really have a renewable or clean energy source that would be able to quickly take the place of petroleum based energy. 

Even if we switch to all electric cars, [like many countries have pledged to do](https://electrek.co/2021/11/10/countries-automakers-agree-go-all-electric-by-2040-weak-new-goal-cop26/), we will run into serious issues regarding resource scarcity and supply chain strain. Lithium-ion batteries are by far the most widely available and cost effective source of energy for most modern electronics, including cars. Yet our reliance on lithium for this technology has proved to be a major bottleneck for the advancement of the technology. We simply [do not have enough lithium](https://www.nature.com/articles/d41586-021-02222-1#:~:text=Lithium%20itself%20is%20not%20scarce,through%20to%20the%20mid%2Dcentury.) to make the turn to all electric cars that many want to. Not to mention the fact that the mining practices needed to extract this lithium, and other raw materials needed for renewable energy, are primarily powered by fossil fuels. Nor are these extraction techniques good for the environment. While we work on new battery techniques that may use less lithium or other elements, we need to be realistic about the future of vehicles around the world. 

With the absence of many better options, it is currently more sustainable to continue to operate our carbon producing vehicles; but we must do so with a more cautious mindset. It is much more sustainable to continue to use a 5 year old car that runs on petroleum based fuel than it is to buy a whole new Tesla. As your vehicle reaches the end of it's lifespan you can begin to think about moving to newer [hybrid, electric, and non-petroleum fueled vehicles](https://www.fueleconomy.gov/feg/consres.shtml). If you don't have the financial privilege needed to purchase one of these alternative vehicles you may want to turn to another used vehicle with better gas mileage. In the meantime, you may want to consider other fuel types for your traditional vehicle. Bio-fuels and ethanol based fuels are becoming more popular these days, yet their lower energy per gallon output [may make them more unsustainable in the long run](https://afdc.energy.gov/fuels/ethanol_benefits.html). This report serves to look at some of these issues and answer some of my curiosities about vehicle sustainability. 

# Fuel Economy Analysis
```{r}
library(tidyverse) #loads the tidyverse package
library(ggplot2) #loads ggplot2
```


We are going to use the `mpg` dataset that is included with the `tidyverse` package
```{r}
fuel_data <- mpg #Assigns the mpg data to the fuel_data object
```

Now we want to take a look at the data so that we understand what we are looking at. Were going to type `view(fuel_data)` into the console so that it doesn't reload every time we run this code or knit the document. 

```{r}
str(fuel_data) #shows the structure of the fuel data frame
```

This data set has 11 different variables.  
There are 234 observations.  
Chr indicates that the type of data stored under that column is a character. Int indicates that the data in that column is an integer. Lastly, num indicates that the data in that column is a numeric.  

```{r}
fuel_data[1:6, ] #This line of code allows us to print the first 6 rows of `fuel_data` 
```

The `displ` is cylinder displacement, `cyl` is the number of cylinders in the engine, and `cty` represent the mpg in the city.  
This data is from the fueleconomy.gov website  

```{r}
nrow(fuel_data) #prints the number of rows in `fuel_data`
ncol(fuel_data) #prints the number of columns in `fuel_data`
```

There are 234 rows.
There are 11 columns. 

```{r}
n_row<- nrow(fuel_data) #assigns the number of rows to an object named `n_row`
n_cols<- ncol(fuel_data) #assigns the number of columns to an object named `n_cols`
```

```{r}
summary(fuel_data) #gives us a summary of all of the rows in `fuel_data`
```

The most efficient highway vehicle is running about 44 mpg.  
The least efficient highway vehicle is running at around 12 mpg. 

The average mpg in the city is 16.86 mpg.

The `mutate()` function can create a new variable in a slightly more convenient way.  
We can also use the `$` notation to assign a new variable. i.e. `fuel_data$new_variable_name<- expression` 
```{r}
fuel_data<- mutate(fuel_data, hwy2cty = hwy/cty) #ads a row to `fuel_data` that is titled `hwy2cty` and is the product of dividing the `hwy` row by the `cty` row
fuel_data 
```

```{r}
summary(fuel_data) 
```

Looking at the summary table we can see that the ratio of highway mpg to city mpg is never below the value of one. If there were a vehicle with better gas mileage in the city as opposed to the highway it should have a ratio below 1. Thus, we can say there is no vehicle in this list that has a better gas mileage in the city. 

Using the same logic, the fact that the ratio is never above a value of 2 means that there are no cars that are twice as good on the highway as they are in the city. 

The largest ratio between the two mile per gallon values is 1.667

## Let's examine how cylinder displacement affects fuel economy
```{r}
ggplot(data = fuel_data) + geom_point(aes(x = hwy, y = displ)) + 
  xlab("Highway MPG") + 
  ylab("Cylinder Dsiplacement (liters)") #plots the data from `fuel_data` in a scatter plot, with the x values being the `hwy` row and the y values being the `displ` row
```

Cylinder displacement has a fairly clear negative correlation with highway gas mileage. The larger the cylinder displacement the lower the highway gas mileage. This is likely a result of the use of more fuel per spark in the engine. Larger engine sizes are also typically associated with larger and heavier vehicles, meaning more fuel will be needed to move that larger mass. 

There are a few outliers towards the top middle of the graph. We can see that some cars with high cylinder displacement have slightly higher gas mileage. This may be a result of the weight of these cars. If the cars in these outliers are lighter, their gas mileage would be better than their heavy counterparts. 

```{r}
ggplot(data = fuel_data) + geom_point(aes(x = hwy, y = displ, color = class)) + labs (color = "Vehicle Class") + 
  xlab("Highway MPG") + 
  ylab("Cylinder Dsiplacement (liters)") #same graph as before but we are now adding the vehicle class to the graph by setting it equal to various colors of the data points
```

Now we can see that those outliers from earlier are 2 seater vehicles. This means that these outliers are probably lighter than their other high displacement counterparts, which appear to mostly be SUVs and pickups. I would postulate that these 2 seaters may be lightweight sports cars with bigger engines to go faster and have better sports performance.  We can also see that smaller car sizes, which tend to also have smaller cylinder displacement, are usually the most efficient. 

```{r}
us_makes<- c("chevrolet","dodge","ford","jeep",
              "lincoln","mercury","pontiac") #creating a new object that has the names listed
fuel_data<- mutate(fuel_data, region = if_else(manufacturer %in% us_makes, "US", "Foreign")) # creates a new row that checks if the vehicle in the column is part of the `us_makes` list or not. If it is, the column in the new row will read "US". If it isn't, the column in the new row will read "Foreign"
fuel_data
```

The variable region is now telling us if the car was manufactured by an American or non-American company. 
To make this variable we are first defining a list of us manufacturers with their names as inputted in the data set. Then we are telling the program to mutate the existing data set and add a new column. This column will have a function run and read if the manufacturer is one of the companies on the list of `us_makes`. If the name is on this list it will be defines at US, if it isn't on this list it will be defined as "foreign".

## Additional Analysis 
```{r}
ggplot(data = fuel_data) + 
  geom_point(aes(x = manufacturer, y = hwy, color = year)) + labs(color = "Year") + 
  scale_x_discrete(guide = guide_axis(n.dodge=2)) + 
  xlab("Manufacturer") + 
  ylab("Highway MPG") #plots `fuel_data` with the x values being the `manufacturer` row, the y value being the `hwy` row, and the color of the data point being the `year` row. 
```

Here I wanted to look at two separate things. The first was what companies have the best and worst highway gas mileage. We can see that there are clearly some relationship between certain companies and their average highway gas mileage. For example: Chevy, Dodge, and Jeep produced vehicles with fairly poor highway gas mileage (<10). That being said, these same companies produce a range of vehicles and these vehicles also have a range of highway gas mileage. Some companies, like Lincoln, Land Rover, and Mercury have a small array of vehicle types. Thus, the mpg of their cars tend to cluster around similar points. It is interesting to note that there is some overlap between the engines and even bodies of these vehicles. For example: Pontiac and Chevy are both a part of GMC and some models have the same engine and frame with different interiors. Thus,, we would expect similar gas mileage between the brands. 

Companies like Toyotaa may produce some good gas mileage vehicles, however, they have such a range that there are also an approximately equal sum of poor gas mileage vehicles. Other companies like Honda seem to produce only good gas mileage vehicles. Now its important to note that this could just be a product of some form of sampling bias. The best highway mpg were achieved by VW. Similar to Toyota, VW has a bit of scatter in their vehicle mpg values, however, this variation is not nearly as large as that of Toyota's. Also,  VW's worst mpg is just below the average mpg of Toyota. 

But now come the third variable being expressed on this graph. The year the vehicle was produced is displayed as the blue shading of the points. Due to our collective concern for the environment and laws/bills put in place around the world to help limit GHG release, we would expect there to be an increase in the MPG values of vehicles over time. In many cases we don't see this! In fact, there are only 3 manufacturers that have a clean (at least graphically) increase in mpg over time. These are Land Rover, Lincoln, and Mercury. The most efficient vehicles on this chart are actually some of the oldest! This does not disprove the idea that vehicle mpg is getting better. It may very well mean that there are other variables affecting mpg that aren't indicated here. There may also be some sort of stacking of the data points, which obscures data points underneath them. We could jitter the points to see of that helps but it may also obscure the currently un-obscured data. We may be able to resolve this isssue by looking at the other factors that may be controlling gas mileage. 

This graph also doesn't show if individual models are actually getting better. For example: the Dodge column seems to show that there are new models that are worse than old models and some old models better than newer models. Yet the graph doesn't display the names of the models. Maybe that newer vehicle with a sub 10 mpg is literally new, i.e. there inst an older version to compare it to. The models with 10 and 11 mpg may be the older versions of the models directly above it. So the trend observed in the Dodge column could be two versions of what is going on with the Lincoln column. 

So lets see if we can't resolve some of the issues with the potential for individual models to be muddling our interpretations of this large data set. To do this, let's zoom in on the Dodge vehicles. 

```{r}
dodge_data<- fuel_data %>% 
  filter(manufacturer %in% c("dodge")) #filtering out only vehicles made by dodge and assigning them to a new object named `dodge_data`

ggplot(data = dodge_data) + 
  geom_point(aes(x = year, y = hwy, color = model)) + 
  xlab("Year") + 
  ylab("Highway MPG") + 
  labs(color = "Dodge Model")
```

This graph is a simple look at the highway fuel efficiency, year, and make of all the dodge vehicles in the previous graph. We can see that some vehicles have the relationship I mentioned earlier. The Dodge Caravan 2wd and Durango both have increases in fuel efficiency as time goes on. But the starting fuel efficiency for these vehicles are different. This difference may be driven by vehicle weight and drive trains. The Caravan is the only 2wd vehicle in this data set and it has better gas mileage than its 4wd counterparts. There tends to be a relationship where 4wd cars are heavier due to the extra parts needed to make them 4wd. Thus, a 4wd car tends to have lower gas mileage than an 2wd car. Seeing the Dodge column in the first graph you may say "Oh wow, the fuel efficiency of Dodges seems to decrease with time, that's suspicious". But now by looking at each model it is plain to see that there is, for the most part, an improvement in fuel efficiency with time. 

The only outlier here is a drop in fuel efficiency for some of the Ram 1500 vehicles in 2008. On the flip side, some of the Ram 15000 models from 2008 appear to be getting 5 mpg better than the other models. Let's see of we cant resolve some of these issues by plotting something different.

```{r}
ggplot(data = dodge_data) + 
  geom_point(aes(x = model, y = hwy, color = year)) + 
   xlab("Dodge Model") + 
  ylab("Highway MPG") + 
  labs(color = "Year") #plots `dodge_data` with the x values being the `model` row, the y values being the `hwy` row, and the color of the points being the `year` row
```

Now things get confusing. Didn't we just see that gas mileage improved with time in every model other than the Ram 1500? Now were seeing that there was a decrease in gas mileage of all of the dodge vehicles. This is likely an artifact of the fact that we are plotting a lot of overlapping points, something known as stacking. Earlier it looks like there were only 3 data points for the Ram 1500 in 2008. In reality, there were 5. The Ram 1500 was also not the only vehicle that had 12 mpg on the highway in 2008. The Dakota also had this same gas mileage but is being plotted underneath the Ram 1500. We could solve this by jittering the points but right now I still want to figure out what is controlling this drop in gas mileage with time. 

For the most part the vehicles seem to be getting better with time, but there is one outlier vehicle in every model category that is worse than any older vehicle was. 

```{r}
ggplot(data = dodge_data) + 
  geom_point(aes(x = model, y = hwy, color = year, shape = trans)) + 
   xlab("Dodge Model") + 
  ylab("Highway MPG") + 
  labs(color = "Year", shape = "Transmission Type") #same graph as above, but now we are adding new shapes to the data points, which are representative of vehicle transmission type
```

If we change the shape of the points to represent the transmission type of the vehicle we can see a potential relationship with automatic transmissions having the worst gas mileage in 3 of the 4 models. This may have something to do with added weight from automatic transmissions. That being said, the most efficient vehicles in each category are also automatic, and these vehicles range in the type of automatic. I5 seems to be both very inefficient and efficient. Same with I4. Maybe the transmission type isn't the important thing here.

```{r}
ggplot(data = dodge_data) + 
  geom_point(aes(x = model, y = hwy, color = cyl)) + 
   xlab("Dodge Model") + 
  ylab("Highway MPG") + 
  labs(color = "Number of Cylinders") #color now represents the number of cylinders
```

When we add in the cylinder numbers we can start to see some more satisfactory relationships. The larger the vehicles engine, the less efficient it is. The Caravan 2wd is not only lighter because its 2wd, but also because it has a smaller engine. Smaller engine and lower weight = better gas mileage than the rest of the Dodge cars. Alas, there is still one outlier. A Dakota with 8 cylinders appears to be operating at a better fuel efficiency than a 6 cylinder Dakota. This may be down to the age of the vehicle, which R wont let me add as a shape because its a continuous variable. So lets try one last re-arrangement to see if wen can get to the bottom of this. 

```{r}
ggplot(data = dodge_data) + 
  geom_point(aes(x = year, y = hwy, color = cyl, shape = model)) + 
   xlab("Year") + 
  ylab("Highway MPG") + 
  labs(color = "Number of Cylinders", shape = "Dodge Model") #year is now the x value and shape represents model type
```

Now if we look closely we can see that the triangular Dakota is under one of the Durango squares in 2008. So this outlier remains unexplained. But, the thing about having one outlier instead of several is that they are easier to interpret by looking at the data set. Analyzing the 2008 vehicles and looking at the 12 mpg Dakota we can see it was running on fuel type e, or E85, while the rest of the cars are running on regular. So that could be our explanation. In fact, all the cars running on E85, a synthetic corn derived fuel, seem to be less efficient than their regular counterparts. This would suggest that the burning of E85 itself is inefficient. Maybe its the lower ethanol content. That kinda sucks because it was a great alternative to traditional fossil fuel but it may end up releasing just as much, if not more, carbon when you factor in the fact that its less efficient and you would need to use more of it to equal regular fuel. 

```{r}
ggplot(data = dodge_data) +
  geom_point(aes(x = model, y = hwy, color = cyl, shape = fl)) + 
   xlab("Dodge Model") + 
  ylab("Highway MPG") + 
  labs(color = "Number of Cylinders", shape = "Fuel Type") #fuel type is now represented by the shape of the point
```

Here we have it, the "smoking gun". We can remove the year because E85 was not in use in the 1999 cars (maybe it had yet to be invented or widely distributed). Now we can see that cars running on E85 are significantly less efficient than every vehicle running on regular gasoline. 

Lets bring it back to where it all began, can we incorporate the fuel type into our original graph of all of the makes and models.
```{r}
ggplot(data = fuel_data) + 
  geom_point(aes(x = manufacturer, y = hwy, color = year, shape = fl)) + 
  scale_x_discrete(guide = guide_axis(n.dodge=2)) + 
   xlab("Manufacturer") + 
  ylab("Highway MPG") + 
  labs(color = "Year", shape = "Fuel Type")
```

Well, the result isn't pretty at all. We can see that the vehicles using E85 have a lower fuel deficiency in every case. It appears that there is a Honda with high fuel efficiency running on E85, however, I cannot seem to find any Honda's in the data set that were run on E85. This may be the result of multiple different fuel types stacking on each other and making the box appear to be a single fuel type. 

Since E85 is introduced into this data set in 2008, we can remove the year factor from this graph to possibly clean it up a bit. 


```{r}
oe_data<- fuel_data %>% 
  filter(year %in%  c(2008)) #filters `fuel_data` to select everything from 2008 and assign it to an object called `oe_data`

ggplot(data = oe_data) + 
  geom_point(aes(x = manufacturer, y = hwy, color = fl)) + 
  scale_x_discrete(guide = guide_axis(n.dodge=2)) + 
   xlab("Manufacturer") + 
  ylab("Highway MPG") + 
  labs(color = "Fuel Typel")
```

There it is, a pretty clear graph showing that E85 is the least efficient fuel being used in the vehicles in this data set. Yet this scatter plot remains pretty gross to look at. Maybe it is time to try a different graph type. 

```{r}
ggplot(data = oe_data) + 
  geom_boxplot(aes(x = fl, y = hwy)) + 
  ylab("Highway MPG") + 
  xlab("Fuel Type")
```

This isn't the greatest box plot ever created, part of the issue is that the diesel and CNG fuel types are not widely used in 2008. CNG is quite an obscure fuel, [produced](https://afdc.energy.gov/fuels/natural_gas_basics.html) by compressing natural gas, hence the name "compressed natural gas". It is a cool premise but only the Honda Civic seems to have been run on this fuel type in 2008. It does seem quite efficient but we onl;y have the one data point to go off of. d, stands for diesel fuel and it is probably a good thing that it is not widely used. That being said, this one data point seems to be about average in terms of fuel efficiency. 

This leaves us with three fuel types that have enough data for us to make assertions about. Regular fuel is the most common and has the largest range of fuel efficiency. This range is likely a result of the wide array of vehicles, some efficient and some inefficient, that are using this widely available fuel type. This is precisely why the boxplot is nice, we can use the 50% line as a good estimate of the efficiency of a vehicle running on regular fuel. p stands for premium fuel, which means the fuel has a higher octane rating. A higher octane rating should mean more energy per gallon of fuel burned. This appears to be the case as cars running on premium, with the exception of a few outliers, have a higher fuel efficiency than the median line of cars running on regular fuel. The outliers could be heavier cars that need more energy to move anyway. They could also be vehicles not designed to use premium gas. I once filled up my 2007 Subaru Forester with premium to see what would happen and it did nothing to the fuel economy, speed, or performance. This is simply because my engine, transmission, and drive train aren't really built to get that much more out of a drop of fuel. The extra energy, if any is actually produced (the excess octane may just not burn in my engine), may not be transferred to my wheels.

This leaves us with E85, or the corn fuel I was talking about earlier. The 85 is actually the fuels octane rating, which is much lower than premium (91-90) and lower than regular (87). The lower octane rating appears to correlate to a lower fuel efficiency in vehicles running on this fuel. Now I would really love to see more vehicles run on E85 to get a better idea of the relationship, but I doubt much would change. With a large number of vehicles on American roads being gas guzzling SUVs and trucks, using slightly cleaner burning ethanol fuel may not pay off in terms of carbon emissions. These wanna be tanks would have to burn more E85 than they would regular or premium fuel. 

In the end we have found that the controls on the highway fuel efficiency of the vehicles in this data set is quite complex. Plotting every model of every make is not terribly efficient at showing what the overlying relationships are. While it is sometimes clear that the age of the vehicle is a first order control on the fuel efficiency of said vehicle, other factors like fuel usage may reverse the relationship we would expect to see. Because synthetic fuel like E85 is younger but also less efficient, it will show up on the initial graph we made as a horribly efficient modern vehicle. Thus, moving to E85 may bot be that helpful if you are looking to cut down on your carbon emissions. This does of course depend on what you do with your vehicle.Other factors like the vehicle's drive train, engine size, and weight are all interrelated and can lead to outliers or weird relationships when plotted like they originally were. That being said, it is still clear that heavier and beefier vehicles are much less efficient than their lower weight, compact counterparts. If your car is on the way out and you cant afford one of the current all electric or hybrid models, I would suggest buying a used compact that has shown descent gas mileage performance. 

This meandering mess of thoughts and graphs has shown the importance of asking questions and hunting down outliers. All too often we look at explainable data and say, "well most of the data does what we want so I wont worry about it". However, the most profound conclusions often come from worrying about "it". This work has also shown that you can plot the same information multiple ways and come to different conclusions. Let it be an important reminder for future data analysis. 


#Optional Work
As my current Subaru Forester slowly dies (and my sadness over the eventual loss of my first car deepens) I am becoming more conscious of what I should do next. Myself, nor my family, can really afford many of the fully electric cars on the market. I have also gained a significant appreciation for Subaru as a brand and experience. Ultimately, I would like to buy another Subaru, preferably one of their hybrid models. So I figured this would be an excellent time to take a look at Subaru historically. 
```{r}
big_data<- read_csv('/Users/IP/Downloads/vehicles.csv') #Reads the downloaded CSV file and assings it to an object names `big_data`
```

```{r}
str(big_data) #structure of `big-data`
```

```{r}
a<- big_data %>% 
  filter(make %in% c("Subaru")) #filters `big_data` and selects every Subaru then assigns this data to an object named `a`
```

```{r}
ggplot(data = a) + geom_point(aes(x= year, y= model, color = highway08)) + 
  scale_y_discrete(name = "Model", limits = c("Crosstrek AWD", "Impreza 5-Door", "WRX", "XV Crosstrek Hybrid AWD", "BRZ", "Outback AWD","Forester AWD","Impreza AWD", "Impreza Wagon AWD", "Baja AWD","Legacy AWD", "Legacy Wagon AWD", "Legacy", "Justy","Loyale", "XT", "Brat 4WD")) + 
  xlab("Year") + 
  ylab("Subaru Model") + 
  labs(color = "Highway MPG") #Probably a cleaner way to right this. I had to use limits to select certain models I wanted to see. I could have probably filtered out the models I wanted and assign it to another object, which would be more robust for future analysis. However, I started this analysis by sort of jumping in and guessing and this is the way I ended up writing the code. 

```

```{r}
#ggsave(filename = "Subaru.png", width = 11, height = 8) # this code was for me and I didnt want you to accidentally download a Subaru graph to your computer
```

I made a fairly straight forward scatter plot with the x values being the year the car was produced and the y values being the model of the car. The color of each dot is representative of the vehicles highway fuel efficiency, with darker hues being less efficient and lighter hues being more efficient. Note that this graph does not include all of the models of Subaru's in this data set. Some vehicles were only produced for a short period of time while others are variants of some of the cars on this list. For example; there are a good 5 or 6 different types of Subaru Legacy's. Plotting all of them makes this messier to look at and is not necessarily crucial to making interpretations about the company and certain mainstream models. 

As we might expect, there is a general trend of increasing fuel efficiency as time goes on. The modern day Crosstrek, Forester, Impreza, and Legacy have some of the best gas mileage seen on this graph. Long lasting models, such as the Legacy, Forester, Impreza, and Outback appear to get slightly better over time, with their gas mileage wildly improving around 2014. This may signify Subaru's turn to a new engine model or other piece of more efficient technology.  Interestingly though, the old late 80s Justy has gas mileage that rivals that of the top Subaru's of today. This may have to do with the Justy's low weight, low cylinder displacement, and smaller engine. Subaru is known for it's flat 4 engines but the Justy has an inline 3 cylinder. This thing is maxing out at 73 hp, so it wont ever really be that inefficient (unless there's a mechanical issue). This thing is actually still rolling around in Japan, where sub-compact cars with small engines that are highly fuel efficient are more popular than in our capitalist hellscape. 

Going into this I expected the WRX to be the worst of the modern day lines. This is because Subaru took the engine in the Impreza and jacked it up with a twin-scroll turbocharger that ups the HP to the 400s. This thing is designed to be a sport car from the start and it's lower fuel efficiency is understandable. But what is interesting is that Subaru's other sports car, the BRZ, has fairly descent gas mileage. In fact, the BRZ may be one of the most efficient cars on this graph. So what is driving the massive difference in gas mileage between Subaru's top sports cars? The BRZ and WRX have nearly the same engine, but the BRZ is not turbocharged. However, according to "Car and Driver" the presence of a turbo may actually increase fuel efficiency because you are forcing the engine to get more power out of every drop of fuel it burns. Thus, something else is clearly the reason behind the BRZ's success. Another likely factor is the drive train, the WRX is an AWD car while the BRZ is RWD. Sadly, AWD cars are generally less fuel efficient than their 2WD drive counterparts (this may also be part of the reason why the small engine Subaru's are in the middle of the pack on the first graph I made in part 2). But why are AWD vehicles less efficient? It turns out that the extra mechanical hardware needed to make a car AWD tends to add an extra 500 lbs or so to the vehicles curb weight, killing fuel efficiency. I can't seem to find a column for vehicle weight in this data set so I don't think we can compare them graphically here. But a quick glance at the curb weight of the two vehicles 2021 models shows that the WRX is in fact about 420 lbs heavier than the BRZ. This difference may be the primary factor driving the different gas mileages. 

So I am leaning towards buying a used Crosstrek, hopefully a hybrid, after I graduate (if my car makes it that long). The Crosstrek seems to have the best gas mileage of the Subaru models (maybe the Justy beats it out but you can't find one of those in good shape) and I would expect it to improve in the future. At the same time the 5-door Impreza offers the Subaru sportiness and utilitarianism with equally as good mileage. It may ultimately come down to market price and availability. In the end, I don't think I will be swayed from buying anything but a Subaru. Love is after all what makes a Subaru, a Subaru. 
