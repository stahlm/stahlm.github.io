---
title: "EPA Fuel Efficiency Data"
author: "Kari Kimball"
date: "(2022-01-11)"
output:
  html_document:
    toc: yes
    df_print: paged
  html_notebook:
    df_print: paged
    theme: spacelab
    toc: yes
---

# Introduction

Fuel economy data from the Environmental Protection Agency (EPA) is used to gain a better understanding about fuel efficiency in automobiles. More specifically, differences in fuel efficiency based on certain factors such as year, make, and whether the vehicle is made in the US or is foreign made.
This information is important because about 51% of carbon dioxide emissions of each US household can be accounted for by their vehicles. With the current state of the environment and climate in particular, along with the continuously worsening effects of climate change, efforts to reduce carbon dioxide emissions need to be made. 

# Part 1: Fuel Efficiency in Automobiles Analysis

## Fuel Economy Analysis

### Set up for analysis

```{r}
library(tidyverse) # bring up tidyverse package
```

```{r}
fuel_data <- mpg # assigning mpg to a new object
```

### Looking at the data

```{r}
str(fuel_data) # looking at the structure of fuel_data
```
How many variables are there?
A: 11 variables

How many observations?
A: 234 observations

What does chr, int, and num mean in the output above?
A: chr (character), int (integer), and num (numeric), refer to the data type

```{r}
head(fuel_data) # looking at the first 6 lines of fuel_data
```
What do the displ, cyl and cty columns represent? 
A: displ = engine displacement, in litres; cyl = number of cylinders; cty = city miles per gallon

What website was the data obtained from?
A: https://fueleconomy.gov/

```{r}
dim(fuel_data) # finding the dimensions of fuel_data
```

Number of rows?
A: 234 rows

Number of columns?
A: 11 columns

```{r}
n_rows <- nrow(fuel_data) # assigning number of rows to n_rows

n_cols <- ncol(fuel_data) # assigning number of columns to n_cols
```

```{r}
summary(fuel_data) # finding summary statistics of fuel_data
```

For highway driving how many miles per gallon does:
The most fuel efficient vehicle get?
A: 44 mpg
The least fuel efficient vehicle get?
A: 12 mpg

What is the average miles per gallon for city driving?
A: 16.86 mpg

### Creating a new variable

```{r}
fuel_data <- mutate(fuel_data, hwy2cty = hwy/cty) # add ratio of hwy to cty to fuel_data
```

Is there any vehicle that gets better gas mileage in the city as compared to the highway?
A: No, all of the ratio values are greater than 1, therefore, city mpg is less than highway mpg for each vehicle.

Is there any vehicle that has twice as good gas mileage on the highway relative to the city?
A: No, all of the ratio values are greater than 1 but less than 2, therefore, the highway mpg of each vehicle is greater than city mpg, but not twice as good.

### Examining factors influencing fuel economy: Displacement

```{r}
ggplot(data = fuel_data) + geom_point(aes(x = displ, y = hwy)) # creating graph of relationship between displacement and highway mpg
```

How does displacement influence the fuel economy?
A: As displacement increases, highway fuel economy decreases.

Do any points appear to be outliers from the observed relationship? Any thoughts on what might explain these outliers?
A: There are a few points between 5 and 7 for displacement that have similar highway mpg as vehicles between 3 and 4. These outliers could be due to the different classes of vehicle.

```{r}
ggplot(data = fuel_data) + geom_point(aes(x = displ, y = hwy, color = class)) # adding class variable to previous graph
```

What new information did this provide us with?
  Can we say more about factors affecting fuel economy?
  A: Each class of vehicle is clumped around a small range of highway mpg, meaning the class of the vehicle is another likely factor that affects fuel economy.
  Can we explain some of the outliers?
  A: 2-seaters have a higher highway mpg for their displacement than what is predicted.

### Adding new variable to fuel_data

```{r}
# adding region variable to fuel_data
us_makes <- c("chevrolet", "dodge", "ford", "jeep", "lincoln", "mercury", "pontiac") # list of U.S. manufacturers

fuel_data <- mutate(fuel_data, region = if_else(manufacturer %in% us_makes, "US", "Foreign"))
```

What is the variable region telling us?
A: Region tells us whether each car was made in the US or in a foreign country.

Can you briefly explain the logic and steps taken to create the variable region?
A: The region variable could be used to determine whether or not the country of origin of the vehicle has an impact on fuel economy.

## Individual Analysis: Relationship Between Fuel Economy and Number of Cylinders

```{r}
ggplot(data = fuel_data) + geom_boxplot(aes(group = cyl, y = hwy)) # visualizing relationship between number of cylinders and highway mpg
```

There is a negative correlation between number of cylinders and highway mpg. This means that the vehicles with lower number of cylinders have a higher highway mpg.
However, there is a lot of variation of highway mpg within each cylinder value.

```{r}
ggplot(data = fuel_data) + geom_boxplot(aes(group = cyl, y = cty)) # visualizing relationship between number of cylinders and city mpg
```

The relationship between number of cylinders and city mpg appears to be similar to the relationship between number of cylinders and highway mpg. In other words, as the number of cylinders increases, the number of mpg in the city decreases.

```{r}
ggplot(data = fuel_data) + geom_boxplot(aes(group = cyl, y = hwy2cty)) # visualize relationship between number of cylinders and ratio between highway and city mpg
```

There does not appear to be a relationship between number of cylinders and ratio of highway to city mpg. There appears to be a significant amount of overlap in ratio values between each number of cylinders.

# Part 2: Expanded EPA Fuel Efficiency Dataset

## Setting up analysis
```{r}
vehicles <- read_csv("vehicles.csv") # uploading the data set
```

## Analyzing Fuel Type's relationship with Highway MPG

```{r}
ggplot(data = vehicles) + geom_boxplot(aes(x = reorder(fuelType1, highway08), y = highway08)) # visualizing the relationship between fuel type and highway MPG, ordering the fuel type by average highway MPG
```

The vehicles that use electricity for fuel get the greatest MPG. The vehicles with the lowest MPG use natural gas for fuel. However, there is a wide range of highway MPG that the vehicles that use natural gas are able to get. Meanwhile, the next lowest average highway MPG occurs in vehicles that use mid-grade gasoline. The range is very small for these vehicles compared to the range of vehicles that use natural gas.

# Conclusion

The analysis of EPA data on fuel efficiency in vehicles shows that there are numerous factors that impact a vehicles fuel efficiency. The analysis shows that the type of gas and the class of the vehicle impacts highway MPG. Furthermore, both city and highway MPG were negatively impacted by the number of cylinders the vehicle had. The displacement (size of the vehicle) also had a negative impact on MPG. All of these factors should be taken into consideration by vehicle makers and buyers in the future in efforts to reduce the human carbon footprint.
